(this["webpackJsonpimcore.react"] = this["webpackJsonpimcore.react"] || []).push([["main"],{

/***/ "./node_modules/@svgr/webpack/lib/index.js?-svgo,+titleProp,+ref!./src/assets/magnifying-glass.svg":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReactComponent", function() { return ForwardRef; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
var _g;

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }



function SvgMagnifyingGlass(_ref, svgRef) {
  var title = _ref.title,
      titleId = _ref.titleId,
      props = _objectWithoutProperties(_ref, ["title", "titleId"]);

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("svg", _extends({
    id: "hpIconSymbol",
    viewBox: "4.94140625 4.640625 40.283203125 40.6484375",
    ref: svgRef,
    "aria-labelledby": titleId
  }, props), title ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("title", {
    id: titleId
  }, title) : null, _g || (_g = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("g", {
    xmlns: "http://www.w3.org/2000/svg",
    fillRule: "nonzero",
    transform: "scale(1,-1) translate(0,-49.951171875)"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("path", {
    fillOpacity: 1,
    d: "     M 20.689453125,13.79296875     C 24.53515625,13.79296875 28.05859375,15.189453125 30.787109375,17.48828125     L 43.205078125,5.005859375     C 43.3984375,4.833984375 43.677734375,4.662109375 44.0,4.662109375     C 44.794921875,4.662109375 45.224609375,5.263671875 45.224609375,5.88671875     C 45.224609375,6.166015625 45.1171875,6.4453125 44.880859375,6.681640625     L 32.462890625,19.12109375     C 34.93359375,21.892578125 36.458984375,25.56640625 36.458984375,29.541015625     C 36.458984375,38.19921875 29.34765625,45.310546875 20.689453125,45.310546875     C 12.03125,45.310546875 4.94140625,38.19921875 4.94140625,29.541015625     C 4.94140625,20.8828125 12.03125,13.79296875 20.689453125,13.79296875     Z     M 20.689453125,14.845703125     C 12.611328125,14.845703125 5.994140625,21.462890625 5.994140625,29.541015625     C 5.994140625,37.619140625 12.611328125,44.2578125 20.689453125,44.2578125     C 28.767578125,44.2578125 35.40625,37.619140625 35.40625,29.541015625     C 35.40625,21.462890625 28.767578125,14.845703125 20.689453125,14.845703125     Z "
  }))));
}

var ForwardRef = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__["forwardRef"](SvgMagnifyingGlass);
/* harmony default export */ __webpack_exports__["default"] = (__webpack_require__.p + "static/media/magnifying-glass.8d940112.svg");


/***/ }),

/***/ "./node_modules/@svgr/webpack/lib/index.js?-svgo,+titleProp,+ref!./src/assets/pen.pencil.svg":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReactComponent", function() { return ForwardRef; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
var _path;

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }



function SvgPenpencil(_ref, svgRef) {
  var title = _ref.title,
      titleId = _ref.titleId,
      props = _objectWithoutProperties(_ref, ["title", "titleId"]);

  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("svg", _extends({
    id: "hpIconSymbol",
    viewBox: "0 0 56 56",
    ref: svgRef,
    "aria-labelledby": titleId
  }, props), title ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("title", {
    id: titleId
  }, title) : null, _path || (_path = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("path", {
    xmlns: "http://www.w3.org/2000/svg",
    d: "M 48.7772 9.9766 L 50.4649 8.2422 C 51.2852 7.4219 51.2852 6.2734 50.4880 5.5000 L 49.9489 4.9375 C 49.2227 4.2109 48.0740 4.3047 47.3008 5.0547 L 45.5897 6.7422 Z M 21.8007 34.3516 L 26.3710 32.3594 L 47.0665 11.6875 L 43.8554 8.5234 L 23.1835 29.1953 L 21.0741 33.6016 C 20.8866 34.0000 21.3554 34.5391 21.8007 34.3516 Z M 12.0741 51.7891 L 39.5897 51.7891 C 43.8085 51.7891 46.2460 49.3516 46.2460 44.5234 L 46.2460 18.4375 L 42.4726 22.2109 L 42.4726 44.3360 C 42.4726 46.7734 41.1601 48.0156 39.5429 48.0156 L 12.1444 48.0156 C 9.8007 48.0156 8.4882 46.7734 8.4882 44.3360 L 8.4882 17.7344 C 8.4882 15.2969 9.8007 14.0312 12.1444 14.0312 L 32.4179 14.0312 L 36.1913 10.2578 L 12.0741 10.2578 C 7.1992 10.2578 4.7148 12.6953 4.7148 17.5234 L 4.7148 44.5234 C 4.7148 49.3750 7.1992 51.7891 12.0741 51.7891 Z"
  })));
}

var ForwardRef = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__["forwardRef"](SvgPenpencil);
/* harmony default export */ __webpack_exports__["default"] = (__webpack_require__.p + "static/media/pen.pencil.b8c4d966.svg");


/***/ }),

/***/ "./src/App.scss":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./src/App.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react-redux/es/index.js");
/* harmony import */ var _App_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/App.scss");
/* harmony import */ var _App_scss__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_App_scss__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _app_connection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/app/connection.ts");
/* harmony import */ var _app_reducers_connection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/app/reducers/connection.ts");
/* harmony import */ var _app_reducers_debug__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/app/reducers/debug.ts");
/* harmony import */ var _components_bar_ChatBar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/components/bar/ChatBar.tsx");
/* harmony import */ var _components_bar_TranscriptBar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./src/components/bar/TranscriptBar.tsx");
/* harmony import */ var _components_ChatSidebar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./src/components/ChatSidebar.tsx");
/* harmony import */ var _components_devtools_DevtoolsRoot__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./src/components/devtools/DevtoolsRoot.tsx");
/* harmony import */ var _components_transcript_ChatTranscript__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__("./src/components/transcript/ChatTranscript.tsx");
/* harmony import */ var _components_transcript_ChatTranscriptFoundation__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__("./src/components/transcript/ChatTranscriptFoundation.tsx");
/* harmony import */ var _contexts_ChatSearchContext__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__("./src/contexts/ChatSearchContext.tsx");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__);
function insertStyles(){var elm=document.getElementById("generated-styles")||document.head.appendChild(document.createElement("style"));elm.id="generated-resources";elm.textContent=":root {\n    ".concat(["bubble-tail","bubble-notail","bubble-stroke-tail","bubble-stroke-notail","send-button","ack-bubble","ack-double-bubble","ack-middle","ack-stack","ack-heart","ack-thumbs-up","ack-thumbs-down","ack-emphasize","ack-question","ack-haha-ar","ack-haha-el","ack-haha-en","ack-haha-es","ack-haha-he","ack-haha-hi","ack-haha-it","ack-haha-ja","ack-haha-ko","ack-haha-th","ack-haha-zh","replay","icloud","video-play","recorded-audio-template"].map(function(id){return"--".concat(id,"-url:url(").concat(_app_connection__WEBPACK_IMPORTED_MODULE_3__["apiClient"].resourceURL(id),");--").concat(id,"-flip-url:url(").concat(_app_connection__WEBPACK_IMPORTED_MODULE_3__["apiClient"].resourceURL(id),"?flip=1);");}).join("\n"),"\n  }");}insertStyles();_app_connection__WEBPACK_IMPORTED_MODULE_3__["apiClient"].getResourceMode().then(function(mode){return document.body.classList.add(mode);});function App(){var showingDevtools=Object(react_redux__WEBPACK_IMPORTED_MODULE_1__["useSelector"])(_app_reducers_debug__WEBPACK_IMPORTED_MODULE_5__["selectShowingDevtools"]);var isPrivacyMode=Object(react_redux__WEBPACK_IMPORTED_MODULE_1__["useSelector"])(_app_reducers_debug__WEBPACK_IMPORTED_MODULE_5__["selectIsPrivacyMode"]);var currentChatID=Object(_components_transcript_ChatTranscriptFoundation__WEBPACK_IMPORTED_MODULE_11__["useCurrentChatID"])();Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function(){_app_connection__WEBPACK_IMPORTED_MODULE_3__["socketClient"].connect(currentChatID?{preload:currentChatID}:undefined);},[]);var didBootstrap=Object(react_redux__WEBPACK_IMPORTED_MODULE_1__["useSelector"])(_app_reducers_connection__WEBPACK_IMPORTED_MODULE_4__["selectBootstrapState"]);return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__["jsx"])("div",{className:"app-root","attr-showing-devtools":showingDevtools.toString(),"attr-privacy-mode":isPrivacyMode.toString(),children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__["jsxs"])(_contexts_ChatSearchContext__WEBPACK_IMPORTED_MODULE_12__["ChatSearchProvider"],{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__["jsxs"])("div",{className:"app-bar",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__["jsx"])(_components_bar_ChatBar__WEBPACK_IMPORTED_MODULE_6__["default"],{}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__["jsx"])(_components_bar_TranscriptBar__WEBPACK_IMPORTED_MODULE_7__["default"],{})]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__["jsx"])(_components_ChatSidebar__WEBPACK_IMPORTED_MODULE_8__["default"],{}),didBootstrap?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__["jsx"])(_components_transcript_ChatTranscriptFoundation__WEBPACK_IMPORTED_MODULE_11__["CurrentMessagesProvider"],{children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__["jsx"])(_components_transcript_ChatTranscript__WEBPACK_IMPORTED_MODULE_10__["default"],{})}):/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__["jsx"])(_components_transcript_ChatTranscript__WEBPACK_IMPORTED_MODULE_10__["default"],{}),showingDevtools?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__["jsx"])(_components_devtools_DevtoolsRoot__WEBPACK_IMPORTED_MODULE_9__["default"],{}):null]})});}/* harmony default export */ __webpack_exports__["default"] = (App);

/***/ }),

/***/ "./src/app/connection.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "socketClient", function() { return socketClient; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "apiClient", function() { return apiClient; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "reconnect", function() { return reconnect; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "receiveMessages", function() { return receiveMessages; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "receiveItems", function() { return receiveItems; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/imcore-ajax-core/dist/index.js");
/* harmony import */ var imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _util_log__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/util/log.ts");
/* harmony import */ var _util_use_persistent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/util/use-persistent.ts");
/* harmony import */ var _reducers_chats__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/app/reducers/chats.ts");
/* harmony import */ var _reducers_connection__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/app/reducers/connection.ts");
/* harmony import */ var _reducers_contacts__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./src/app/reducers/contacts.ts");
/* harmony import */ var _reducers_messages__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./src/app/reducers/messages.ts");
/* harmony import */ var _store__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./src/app/store.ts");
/* harmony import */ var _typing_aggregator__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__("./src/app/typing-aggregator.ts");
var Log=Object(_util_log__WEBPACK_IMPORTED_MODULE_3__["default"])("IMServerConnection","info");var imCoreHostConfig=Object(_util_use_persistent__WEBPACK_IMPORTED_MODULE_4__["getPersistentValue"])("imcore-host","localhost:8090");var formatURL=function formatURL(protocol,path){return"".concat(protocol,"://").concat(imCoreHostConfig.value).concat(path?"/".concat(path):"");};var socketClient=new imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["IMWebSocketClient"](formatURL("ws","stream"));var apiClient=new imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["IMHTTPClient"]({baseURL:formatURL("http")});function rebuildEndpoints(){socketClient.url=formatURL("ws","stream");apiClient.baseURL=formatURL("http");}function reconnect(_x){return _reconnect.apply(this,arguments);}function _reconnect(){_reconnect=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(/*#__PURE__*/_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(options){return _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return socketClient.close();case 2:rebuildEndpoints();socketClient.connect(options);case 4:case"end":return _context.stop();}}},_callee);}));return _reconnect.apply(this,arguments);}function receiveChangedChat(chat){_store__WEBPACK_IMPORTED_MODULE_9__["store"].dispatch(Object(_reducers_chats__WEBPACK_IMPORTED_MODULE_5__["chatChanged"])(chat));}socketClient.on(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["EventType"].conversationCreated,receiveChangedChat);socketClient.on(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["EventType"].conversationChanged,receiveChangedChat);socketClient.on(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["EventType"].conversationRemoved,function(_ref){var chat=_ref.chat;return _store__WEBPACK_IMPORTED_MODULE_9__["store"].dispatch(Object(_reducers_chats__WEBPACK_IMPORTED_MODULE_5__["chatDeleted"])(chat));});socketClient.on(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["EventType"].conversationDisplayNameChanged,receiveChangedChat);socketClient.on(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["EventType"].conversationJoinStateChanged,receiveChangedChat);socketClient.on(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["EventType"].conversationPropertiesChanged,function(conf){return _store__WEBPACK_IMPORTED_MODULE_9__["store"].dispatch(Object(_reducers_chats__WEBPACK_IMPORTED_MODULE_5__["chatPropertiesChanged"])(conf));});socketClient.on(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["EventType"].conversationUnreadCountChanged,receiveChangedChat);socketClient.on(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["EventType"].participantsChanged,function(ev){return _store__WEBPACK_IMPORTED_MODULE_9__["store"].dispatch(Object(_reducers_chats__WEBPACK_IMPORTED_MODULE_5__["chatParticipantsUpdated"])(ev));});function receiveMessages(messages){Log.debug("Received %d messages from server",messages.length);_store__WEBPACK_IMPORTED_MODULE_9__["store"].dispatch(Object(_reducers_messages__WEBPACK_IMPORTED_MODULE_8__["messagesChanged"])(messages));_store__WEBPACK_IMPORTED_MODULE_9__["store"].dispatch(Object(_reducers_chats__WEBPACK_IMPORTED_MODULE_5__["chatMessagesReceived"])(messages));_typing_aggregator__WEBPACK_IMPORTED_MODULE_10__["default"].sharedInstance.messagesReceived(messages);}function receiveItems(items){var messages=items.filter(function(item){return item.type===imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["ChatItemType"].message;}).map(function(item){return item.payload;});receiveMessages(messages);}socketClient.on(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["EventType"].itemsReceived,function(_ref2){var items=_ref2.items;return receiveItems(items);});socketClient.on(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["EventType"].itemsUpdated,function(_ref3){var items=_ref3.items;return receiveItems(items);});socketClient.on(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["EventType"].itemsRemoved,function(_ref4){var messages=_ref4.messages;return _store__WEBPACK_IMPORTED_MODULE_9__["store"].dispatch(Object(_reducers_messages__WEBPACK_IMPORTED_MODULE_8__["messagesDeleted"])(messages));});socketClient.on(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["EventType"].itemStatusChanged,function(payload){return _store__WEBPACK_IMPORTED_MODULE_9__["store"].dispatch(Object(_reducers_messages__WEBPACK_IMPORTED_MODULE_8__["statusChanged"])(payload));});function receiveContact(contact){_store__WEBPACK_IMPORTED_MODULE_9__["store"].dispatch(Object(_reducers_contacts__WEBPACK_IMPORTED_MODULE_7__["contactChanged"])(contact));}socketClient.on(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["EventType"].contactCreated,receiveContact);socketClient.on(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["EventType"].contactUpdated,receiveContact);socketClient.on(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["EventType"].contactRemoved,function(c){return _store__WEBPACK_IMPORTED_MODULE_9__["store"].dispatch(Object(_reducers_contacts__WEBPACK_IMPORTED_MODULE_7__["contactDeleted"])(c.id));});socketClient.on(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["EventType"].bootstrap,function(_ref5){var chats=_ref5.chats,contacts=_ref5.contacts,messages=_ref5.messages;Log.info("Got bootstrap from event stream");_store__WEBPACK_IMPORTED_MODULE_9__["store"].dispatch(Object(_reducers_chats__WEBPACK_IMPORTED_MODULE_5__["chatsChanged"])(chats));_store__WEBPACK_IMPORTED_MODULE_9__["store"].dispatch(Object(_reducers_contacts__WEBPACK_IMPORTED_MODULE_7__["contactsChanged"])(contacts.contacts));_store__WEBPACK_IMPORTED_MODULE_9__["store"].dispatch(Object(_reducers_contacts__WEBPACK_IMPORTED_MODULE_7__["strangersReceived"])(contacts.strangers));if(messages)receiveMessages(messages);_store__WEBPACK_IMPORTED_MODULE_9__["store"].dispatch(Object(_reducers_connection__WEBPACK_IMPORTED_MODULE_6__["receivedBootstrap"])());});

/***/ }),

/***/ "./src/app/reducers/chats.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "chatSlice", function() { return chatSlice; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "chatsChanged", function() { return chatsChanged; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setTypingStatus", function() { return setTypingStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "chatChanged", function() { return chatChanged; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "chatDeleted", function() { return chatDeleted; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "chatMessagesReceived", function() { return chatMessagesReceived; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "chatPropertiesChanged", function() { return chatPropertiesChanged; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "chatParticipantsUpdated", function() { return chatParticipantsUpdated; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "selectChats", function() { return selectChats; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "selectTypingStatus", function() { return selectTypingStatus; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js");
/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");
/* harmony import */ var imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/imcore-ajax-core/dist/index.js");
/* harmony import */ var imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__);
var initialState={byID:{},typingStatus:{}};var acceptedLastMessageTypes=[imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__["ChatItemType"].acknowledgment,imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__["ChatItemType"].associated,imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__["ChatItemType"].plugin,imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__["ChatItemType"].sticker,imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__["ChatItemType"].attachment,imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__["ChatItemType"].text];var chatSlice=Object(_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__["createSlice"])({name:"chats",initialState:initialState,reducers:{chatsChanged:function chatsChanged(chats,_ref){var newChats=_ref.payload;newChats.forEach(function(chat){return chats.byID[chat.id]=chat;});},chatChanged:function chatChanged(chats,_ref2){var chat=_ref2.payload;chats.byID[chat.id]=chat;},chatDeleted:function chatDeleted(chats,_ref3){var chatID=_ref3.payload;delete chats.byID[chatID];},chatMessagesReceived:function chatMessagesReceived(chats,_ref4){var messages=_ref4.payload;var _iterator=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__["default"])(messages),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_step.value,chatID=_step$value.chatID,description=_step$value.description,time=_step$value.time,items=_step$value.items;if(!chats.byID[chatID])continue;if(time<=chats.byID[chatID].lastMessageTime)continue;var isTyping=items.some(function(item){return item.type===imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__["ChatItemType"].typing;});chats.typingStatus[chatID]=isTyping;if(!items.some(function(item){return acceptedLastMessageTypes.includes(item.type);}))continue;Object.assign(chats.byID[chatID],{lastMessage:description,lastMessageTime:time});}}catch(err){_iterator.e(err);}finally{_iterator.f();}},setTypingStatus:function setTypingStatus(chats,_ref5){var _ref5$payload=_ref5.payload,chatID=_ref5$payload.chatID,typing=_ref5$payload.typing;chats.typingStatus[chatID]=typing;},chatPropertiesChanged:function chatPropertiesChanged(chats,_ref6){var _ref6$payload=_ref6.payload,id=_ref6$payload.id,properties=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__["default"])(_ref6$payload,["id"]);if(!chats.byID[id])return;Object.assign(chats.byID[id],properties);},chatParticipantsUpdated:function chatParticipantsUpdated(chats,_ref7){var _ref7$payload=_ref7.payload,chat=_ref7$payload.chat,handles=_ref7$payload.handles;if(!chats.byID[chat])return;chats.byID[chat].participants=handles;}}});var _chatSlice$actions=chatSlice.actions,chatsChanged=_chatSlice$actions.chatsChanged,setTypingStatus=_chatSlice$actions.setTypingStatus,chatChanged=_chatSlice$actions.chatChanged,chatDeleted=_chatSlice$actions.chatDeleted,chatMessagesReceived=_chatSlice$actions.chatMessagesReceived,chatPropertiesChanged=_chatSlice$actions.chatPropertiesChanged,chatParticipantsUpdated=_chatSlice$actions.chatParticipantsUpdated;var selectChats=function selectChats(state){return state.chats.byID;};var selectTypingStatus=function selectTypingStatus(state,chatID){return state.chats.typingStatus[chatID]||false;};/* harmony default export */ __webpack_exports__["default"] = (chatSlice.reducer);

/***/ }),

/***/ "./src/app/reducers/connection.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "connectionSlice", function() { return connectionSlice; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "receivedBootstrap", function() { return receivedBootstrap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "selectBootstrapState", function() { return selectBootstrapState; });
/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");
var initialState={bootstrapped:false};var connectionSlice=Object(_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__["createSlice"])({name:"connection",initialState:initialState,reducers:{receivedBootstrap:function receivedBootstrap(connection){connection.bootstrapped=true;}}});var receivedBootstrap=connectionSlice.actions.receivedBootstrap;var selectBootstrapState=function selectBootstrapState(state){return state.connection.bootstrapped;};/* harmony default export */ __webpack_exports__["default"] = (connectionSlice.reducer);

/***/ }),

/***/ "./src/app/reducers/contacts.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "contactsSlice", function() { return contactsSlice; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "contactsChanged", function() { return contactsChanged; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "contactChanged", function() { return contactChanged; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "contactDeleted", function() { return contactDeleted; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "strangersReceived", function() { return strangersReceived; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "selectContacts", function() { return selectContacts; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "selectStrangers", function() { return selectStrangers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "selectHandleIDToContact", function() { return selectHandleIDToContact; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");
var initialState={byID:{},strangers:{}};var contactsSlice=Object(_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__["createSlice"])({name:"contacts",initialState:initialState,reducers:{contactsChanged:function contactsChanged(contacts,_ref){var newContacts=_ref.payload;Object.assign(contacts.byID,newContacts.reduce(function(acc,contact){return Object.assign(acc,Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__["default"])({},contact.id,contact));},{}));},contactChanged:function contactChanged(contacts,_ref2){var contact=_ref2.payload;contacts.byID[contact.id]=contact;},contactDeleted:function contactDeleted(contacts,_ref3){var contactID=_ref3.payload;delete contacts.byID[contactID];},strangersReceived:function strangersReceived(contacts,_ref4){var strangers=_ref4.payload;Object.assign(contacts.strangers,strangers.reduce(function(acc,stranger){return Object.assign(acc,Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__["default"])({},stranger.id,stranger),{});}));}}});var _contactsSlice$action=contactsSlice.actions,contactsChanged=_contactsSlice$action.contactsChanged,contactChanged=_contactsSlice$action.contactChanged,contactDeleted=_contactsSlice$action.contactDeleted,strangersReceived=_contactsSlice$action.strangersReceived;var selectContacts=function selectContacts(state){return state.contacts.byID;};var selectStrangers=function selectStrangers(state){return state.contacts.strangers;};var selectHandleIDToContact=Object(_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__["createSelector"])([selectContacts],function(contacts){return Object.values(contacts).reduce(function(acc,contact){var _iterator=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__["default"])(contact.handles),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var handle=_step.value;acc[handle.id]=contact;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return acc;},{});});/* harmony default export */ __webpack_exports__["default"] = (contactsSlice.reducer);

/***/ }),

/***/ "./src/app/reducers/debug.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "debugSlice", function() { return debugSlice; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setShowDevtools", function() { return setShowDevtools; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setPrivacyMode", function() { return setPrivacyMode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setInvertedScrolling", function() { return setInvertedScrolling; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "selectShowingDevtools", function() { return selectShowingDevtools; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "selectIsPrivacyMode", function() { return selectIsPrivacyMode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "selectUseInvertedScrolling", function() { return selectUseInvertedScrolling; });
/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");
/* harmony import */ var _util_use_persistent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/util/use-persistent.ts");
var persistentConfig={showDevtools:Object(_util_use_persistent__WEBPACK_IMPORTED_MODULE_1__["getPersistentValue"])("showing-devtools",false),invertedScrolling:Object(_util_use_persistent__WEBPACK_IMPORTED_MODULE_1__["getPersistentValue"])("use-inverted-scrolling",false)};var initialState={showDevtools:persistentConfig.showDevtools.value,privacy:false,invertedScrolling:persistentConfig.invertedScrolling.value};var debugSlice=Object(_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__["createSlice"])({name:"debug",initialState:initialState,reducers:{setShowDevtools:function setShowDevtools(debug,_ref){var payload=_ref.payload;debug.showDevtools=persistentConfig.showDevtools.value=payload;},setPrivacyMode:function setPrivacyMode(debug,_ref2){var payload=_ref2.payload;debug.privacy=payload;},setInvertedScrolling:function setInvertedScrolling(debug,_ref3){var payload=_ref3.payload;debug.invertedScrolling=persistentConfig.invertedScrolling.value=payload;}}});var _debugSlice$actions=debugSlice.actions,setShowDevtools=_debugSlice$actions.setShowDevtools,setPrivacyMode=_debugSlice$actions.setPrivacyMode,setInvertedScrolling=_debugSlice$actions.setInvertedScrolling;var selectShowingDevtools=function selectShowingDevtools(state){return state.debug.showDevtools;};var selectIsPrivacyMode=function selectIsPrivacyMode(state){return state.debug.privacy;};var selectUseInvertedScrolling=function selectUseInvertedScrolling(state){return state.debug.invertedScrolling;};/* harmony default export */ __webpack_exports__["default"] = (debugSlice.reducer);

/***/ }),

/***/ "./src/app/reducers/messages.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "messagesSlice", function() { return messagesSlice; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "messagesChanged", function() { return messagesChanged; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "messagesDeleted", function() { return messagesDeleted; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "statusChanged", function() { return statusChanged; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "stageAcknowledgmentOverride", function() { return stageAcknowledgmentOverride; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "selectMessages", function() { return selectMessages; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js");
/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");
/* harmony import */ var imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/imcore-ajax-core/dist/index.js");
/* harmony import */ var imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _util_log__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/util/log.ts");
var initialState={messages:{},messageToChatID:{}};var Log=Object(_util_log__WEBPACK_IMPORTED_MODULE_4__["default"])("Redux/Messages","info");var messagesSlice=Object(_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_2__["createSlice"])({name:"messages",initialState:initialState,reducers:{messagesChanged:function messagesChanged(state,_ref){var messages=_ref.payload;var acknowledgments=[];var _iterator=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__["default"])(messages),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _state$messages$messa;var message=_step.value;var messageStorage=(_state$messages$messa=state.messages[message.chatID])!==null&&_state$messages$messa!==void 0?_state$messages$messa:state.messages[message.chatID]={};messageStorage[message.id]=message;state.messageToChatID[message.id]=message.chatID;if(!message.associatedMessageID)continue;var _iterator3=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__["default"])(message.items),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var item=_step3.value;switch(item.type){case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__["ChatItemType"].acknowledgment:acknowledgments.push(item.payload);}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}}catch(err){_iterator.e(err);}finally{_iterator.f();}if(!acknowledgments.length)return;var _iterator2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__["default"])(acknowledgments.sort(function(a1,a2){return a1.time-a2.time;})),_step2;try{var _loop=function _loop(){var _state$messages$ackno;var acknowledgment=_step2.value;var messageStorage=(_state$messages$ackno=state.messages[acknowledgment.chatID])!==null&&_state$messages$ackno!==void 0?_state$messages$ackno:state.messages[acknowledgment.chatID]={};var _acknowledgment$assoc=acknowledgment.associatedID.split(acknowledgment.associatedID.includes("/")?"/":":"),_acknowledgment$assoc2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__["default"])(_acknowledgment$assoc,2),messageID=_acknowledgment$assoc2[1];if(!messageStorage[messageID]){Log.debug("Dropping dangling acknowledgment (ackID: %s, assID: %s)",acknowledgment.id,messageID);return"continue";}var associatedItem=messageStorage[messageID].items.find(function(messageItem){return messageItem.payload.id===acknowledgment.associatedID;});if(!associatedItem){Log.debug("Dropping phantom acknowledgment (ackID: %s, assID: %s)",acknowledgment.id,messageID);return"continue";}switch(associatedItem.type){case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__["ChatItemType"].text:case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__["ChatItemType"].attachment:case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__["ChatItemType"].plugin:if(!associatedItem.payload.acknowledgments)associatedItem.payload.acknowledgments=[];associatedItem.payload.acknowledgments=associatedItem.payload.acknowledgments.filter(function(ack){return(acknowledgment.fromMe?!ack.fromMe:true)&&ack.id!==acknowledgment.id;});Log.debug("Received acknowledgment for message %s with type %d and id %s",messageID,acknowledgment.acknowledgmentType,acknowledgment.id);associatedItem.payload.acknowledgments.push(acknowledgment);}};for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _ret=_loop();if(_ret==="continue")continue;}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}},messagesDeleted:function messagesDeleted(state,_ref2){var messageIDs=_ref2.payload;var _iterator4=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__["default"])(messageIDs),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var messageID=_step4.value;var chatID=state.messageToChatID[messageID];if(!chatID||!state.messages[chatID])return;delete state.messages[chatID][messageID];}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}},stopTyping:function stopTyping(state,_ref3){var _state$messages$chatI;var messageID=_ref3.payload;var chatID=state.messageToChatID[messageID];if(!chatID||!((_state$messages$chatI=state.messages[chatID])===null||_state$messages$chatI===void 0?void 0:_state$messages$chatI[messageID]))return;var message=state.messages[chatID][messageID];if(message.items.some(function(item){return item.type===imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__["ChatItemType"].typing;}))delete state.messages[chatID][messageID];},statusChanged:function statusChanged(state,_ref4){var _ref4$payload=_ref4.payload,chatID=_ref4$payload.chatID,id=_ref4$payload.id,timeDelivered=_ref4$payload.timeDelivered,timePlayed=_ref4$payload.timePlayed,timeRead=_ref4$payload.timeRead,time=_ref4$payload.time;console.log({chatID:chatID,id:id,time:time,timeDelivered:timeDelivered,timeRead:timeRead,timePlayed:timePlayed});},stageAcknowledgmentOverride:function stageAcknowledgmentOverride(state,_ref5){var _chat$messageID;var _ref5$payload=_ref5.payload,type=_ref5$payload.type,messageID=_ref5$payload.messageID,chatItemID=_ref5$payload.chatItemID;var chatID=state.messageToChatID[messageID];var chat=state.messages[chatID];if(!chat)return;var item=(_chat$messageID=chat[messageID])===null||_chat$messageID===void 0?void 0:_chat$messageID.items.find(function(item){return item.payload.id===chatItemID;});if(!item)return;if("acknowledgments"in item.payload&&item.payload.acknowledgments){var oldFromMe=item.payload.acknowledgments.findIndex(function(ack){return ack.fromMe;});if(oldFromMe>-1)item.payload.acknowledgments.splice(oldFromMe,1);if(type<3000)item.payload.acknowledgments.push({id:"...",chatID:chatID,fromMe:true,time:Date.now(),associatedID:chatItemID,acknowledgmentType:type});}}}});var _messagesSlice$action=messagesSlice.actions,messagesChanged=_messagesSlice$action.messagesChanged,messagesDeleted=_messagesSlice$action.messagesDeleted,statusChanged=_messagesSlice$action.statusChanged,stageAcknowledgmentOverride=_messagesSlice$action.stageAcknowledgmentOverride;var selectMessages=function selectMessages(state){return state.messages.messages;};/* harmony default export */ __webpack_exports__["default"] = (messagesSlice.reducer);

/***/ }),

/***/ "./src/app/reducers/presence.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "presenceSlice", function() { return presenceSlice; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "visibilityChanged", function() { return visibilityChanged; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "messageChanged", function() { return messageChanged; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "chatChanged", function() { return chatChanged; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "chatItemChanged", function() { return chatItemChanged; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "selectVisibilityState", function() { return selectVisibilityState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "selectHoveringOverMessageID", function() { return selectHoveringOverMessageID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "selectHoveringOverChatID", function() { return selectHoveringOverChatID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "selectHoveringOverChatItemID", function() { return selectHoveringOverChatItemID; });
/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");
/* harmony import */ var _util_log__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/util/log.ts");
var initialState={tabIsActive:true,hoveringOverMessageID:null,hoveringOverChatItemID:null,hoveringOverChatID:null};var Log=Object(_util_log__WEBPACK_IMPORTED_MODULE_1__["default"])("Redux/Presences","debug");var presenceSlice=Object(_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__["createSlice"])({name:"presence",initialState:initialState,reducers:{visibilityChanged:function visibilityChanged(presence){var isActive=document.visibilityState==="visible";if(isActive!==presence.tabIsActive)Log.debug("Presence changed to %d",isActive);presence.tabIsActive=isActive;},messageChanged:function messageChanged(presence,_ref){var messageID=_ref.payload;presence.hoveringOverMessageID=messageID;},chatItemChanged:function chatItemChanged(presence,_ref2){var _ref2$payload=_ref2.payload,messageID=_ref2$payload.messageID,chatItemID=_ref2$payload.chatItemID;presence.hoveringOverMessageID=messageID;if(!messageID||chatItemID&&!chatItemID.endsWith(messageID))chatItemID=null;else if(messageID&&!chatItemID)chatItemID=presence.hoveringOverChatItemID;presence.hoveringOverChatItemID=chatItemID;},chatChanged:function chatChanged(presence,_ref3){var chatID=_ref3.payload;presence.hoveringOverChatID=chatID;}}});var _presenceSlice$action=presenceSlice.actions,visibilityChanged=_presenceSlice$action.visibilityChanged,messageChanged=_presenceSlice$action.messageChanged,chatChanged=_presenceSlice$action.chatChanged,chatItemChanged=_presenceSlice$action.chatItemChanged;var selectVisibilityState=function selectVisibilityState(state){return state.presence.tabIsActive;};var selectHoveringOverMessageID=function selectHoveringOverMessageID(state){return state.presence.hoveringOverMessageID;};var selectHoveringOverChatID=function selectHoveringOverChatID(state){return state.presence.hoveringOverChatID;};var selectHoveringOverChatItemID=function selectHoveringOverChatItemID(state){return state.presence.hoveringOverChatItemID;};/* harmony default export */ __webpack_exports__["default"] = (presenceSlice.reducer);

/***/ }),

/***/ "./src/app/store.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "store", function() { return store; });
/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");
/* harmony import */ var _reducers_chats__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/app/reducers/chats.ts");
/* harmony import */ var _reducers_connection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/app/reducers/connection.ts");
/* harmony import */ var _reducers_contacts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/app/reducers/contacts.ts");
/* harmony import */ var _reducers_debug__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/app/reducers/debug.ts");
/* harmony import */ var _reducers_messages__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/app/reducers/messages.ts");
/* harmony import */ var _reducers_presence__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/app/reducers/presence.ts");
var store=Object(_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__["configureStore"])({reducer:{chats:_reducers_chats__WEBPACK_IMPORTED_MODULE_1__["default"],messages:_reducers_messages__WEBPACK_IMPORTED_MODULE_5__["default"],contacts:_reducers_contacts__WEBPACK_IMPORTED_MODULE_3__["default"],presence:_reducers_presence__WEBPACK_IMPORTED_MODULE_6__["default"],debug:_reducers_debug__WEBPACK_IMPORTED_MODULE_4__["default"],connection:_reducers_connection__WEBPACK_IMPORTED_MODULE_2__["default"]},middleware:function middleware(getDefaultMiddleware){return getDefaultMiddleware({immutableCheck:false});}});

/***/ }),

/***/ "./src/app/typing-aggregator.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return TypingAggregator; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/imcore-ajax-core/dist/index.js");
/* harmony import */ var imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _util_log__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/util/log.ts");
/* harmony import */ var _reducers_chats__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/app/reducers/chats.ts");
/* harmony import */ var _reducers_messages__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/app/reducers/messages.ts");
/* harmony import */ var _store__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./src/app/store.ts");
var isTypingMessage=function isTypingMessage(message){return message.isTypingMessage||message.items.some(function(item){return item.type===imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__["ChatItemType"].typing;});};var Log=Object(_util_log__WEBPACK_IMPORTED_MODULE_4__["default"])("TypingAggregator","debug");/**
 * Manages the state of typing messages, expiring them and invalidating old ones as new ones arrive
 */var TypingAggregator=/*#__PURE__*/function(){function TypingAggregator(){Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__["default"])(this,TypingAggregator);this.chats=new Map();this.timeouts=new Map();}Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__["default"])(TypingAggregator,[{key:"messageReceived",value:function messageReceived(message){var _this=this;if(!isTypingMessage(message))return;var oldMessage=this.typingMessageForChat(message.chatID);if(oldMessage){if(oldMessage.time>message.time)return;Log.info("Expiring dead typing message with ID %s in chta %s",oldMessage.id,oldMessage.chatID);_store__WEBPACK_IMPORTED_MODULE_7__["store"].dispatch(Object(_reducers_messages__WEBPACK_IMPORTED_MODULE_6__["messagesDeleted"])([oldMessage.id]));}this.chats.set(message.chatID,message.id);if(this.timeouts.has(message.chatID))clearTimeout(this.timeouts.get(message.chatID));this.timeouts.set(message.chatID,setTimeout(function(){var _this$typingMessageFo;if(((_this$typingMessageFo=_this.typingMessageForChat(message.chatID))===null||_this$typingMessageFo===void 0?void 0:_this$typingMessageFo.id)===message.id){_store__WEBPACK_IMPORTED_MODULE_7__["store"].dispatch(Object(_reducers_messages__WEBPACK_IMPORTED_MODULE_6__["messagesDeleted"])([message.id]));_store__WEBPACK_IMPORTED_MODULE_7__["store"].dispatch(Object(_reducers_chats__WEBPACK_IMPORTED_MODULE_5__["setTypingStatus"])({chatID:message.chatID,typing:false}));_this.chats.delete(message.chatID);}_this.timeouts.delete(message.chatID);},30000));}},{key:"messagesReceived",value:function messagesReceived(messages){var _iterator=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__["default"])(messages),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var message=_step.value;this.messageReceived(message);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}},{key:"typingMessageForChat",value:function typingMessageForChat(chatID){var _store$getState$messa;if(!this.chats.get(chatID))return null;var typingMessageID=this.chats.get(chatID);var message=(_store$getState$messa=_store__WEBPACK_IMPORTED_MODULE_7__["store"].getState().messages.messages[chatID])===null||_store$getState$messa===void 0?void 0:_store$getState$messa[typingMessageID];if(!message)return null;if(!isTypingMessage(message)){this.chats.set(chatID,null);return null;}return message;}}]);return TypingAggregator;}();TypingAggregator.sharedInstance=new TypingAggregator();

/***/ }),

/***/ "./src/components/ChatSidebar.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_virtualized_auto_sizer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react-virtualized-auto-sizer/dist/index.esm.js");
/* harmony import */ var react_window__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/react-window/dist/index.esm.js");
/* harmony import */ var _app_reducers_presence__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/app/reducers/presence.ts");
/* harmony import */ var _app_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/app/store.ts");
/* harmony import */ var _contexts_ChatSearchContext__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/contexts/ChatSearchContext.tsx");
/* harmony import */ var _styles_ChatSidebar_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/styles/ChatSidebar.scss");
/* harmony import */ var _styles_ChatSidebar_scss__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_styles_ChatSidebar_scss__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _util_dom__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./src/util/dom.ts");
/* harmony import */ var _ChatSidebarItem__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./src/components/ChatSidebarItem.tsx");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__);
function findChatID(element){var _findAncestor;return((_findAncestor=Object(_util_dom__WEBPACK_IMPORTED_MODULE_7__["findAncestor"])(element,function(ancestor){return ancestor.hasAttribute("attr-chat-id");}))===null||_findAncestor===void 0?void 0:_findAncestor.getAttribute("attr-chat-id"))||null;}var RowRenderer=/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.memo(function RowRenderer(_ref){var index=_ref.index,data=_ref.data,style=_ref.style;if(!data[index])return null;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__["jsx"])(_ChatSidebarItem__WEBPACK_IMPORTED_MODULE_8__["default"],{style:style,chat:data[index]});},function(prevProps,nextProps){if(!Object(react_window__WEBPACK_IMPORTED_MODULE_2__["areEqual"])(prevProps,nextProps))return false;var prevChat=prevProps.data[prevProps.index];var nextChat=nextProps.data[nextProps.index];if(prevChat.id!==nextChat.id)return false;if(prevChat.lastMessage!==nextChat.lastMessage)return false;if(prevChat.lastMessageTime!==nextChat.lastMessageTime)return false;if(prevChat.unreadMessageCount!==nextChat.unreadMessageCount)return false;if(prevChat.displayName!==nextChat.displayName)return false;if(prevChat.ignoreAlerts!==nextChat.ignoreAlerts)return false;if(prevChat.groupPhotoID!==nextChat.groupPhotoID)return false;if(JSON.stringify(prevChat.participants)!==JSON.stringify(nextChat.participants))return false;return true;});function ChatSidebar(){var _useContext=Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(_contexts_ChatSearchContext__WEBPACK_IMPORTED_MODULE_5__["ChatSearchContext"]),chatResults=_useContext.chatResults;var chats=Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function(){return chatResults.slice().sort(function(c1,c2){return c2.lastMessageTime-c1.lastMessageTime;});},[chatResults]);return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__["jsx"])("div",{onMouseOver:function onMouseOver(event){if(!(event.target instanceof HTMLElement))return;var currentChatID=findChatID(event.target);if(!currentChatID)return;if(currentChatID===_app_store__WEBPACK_IMPORTED_MODULE_4__["store"].getState().presence.hoveringOverChatID)return;_app_store__WEBPACK_IMPORTED_MODULE_4__["store"].dispatch(Object(_app_reducers_presence__WEBPACK_IMPORTED_MODULE_3__["chatChanged"])(currentChatID));},children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__["jsx"])(react_virtualized_auto_sizer__WEBPACK_IMPORTED_MODULE_1__["default"],{children:function children(_ref2){var height=_ref2.height;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__["jsx"])(react_window__WEBPACK_IMPORTED_MODULE_2__["FixedSizeList"],{height:height,className:"chat-sidebar",itemCount:chats.length,itemData:chats,itemSize:60,itemKey:function itemKey(index,data){var _data$index;return((_data$index=data[index])===null||_data$index===void 0?void 0:_data$index.id)||Math.random();},overscanCount:35,width:285,children:RowRenderer});}})});}/* harmony default export */ __webpack_exports__["default"] = (ChatSidebar);

/***/ }),

/***/ "./src/components/ChatSidebarItem.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react-redux/es/index.js");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/react-router-dom/esm/react-router-dom.js");
/* harmony import */ var _app_reducers_chats__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/app/reducers/chats.ts");
/* harmony import */ var _hooks_useChatName__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/hooks/useChatName.ts");
/* harmony import */ var _styles_ChatSidebarItem_scss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/styles/ChatSidebarItem.scss");
/* harmony import */ var _styles_ChatSidebarItem_scss__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_styles_ChatSidebarItem_scss__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _util_receipt_formatting__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/util/receipt-formatting.ts");
/* harmony import */ var _chat_ChatBubble__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./src/components/chat/ChatBubble.tsx");
/* harmony import */ var _transcript_ChatTranscriptFoundation__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./src/components/transcript/ChatTranscriptFoundation.tsx");
/* harmony import */ var _transcript_items_chat_IMTypingChatItem__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./src/components/transcript/items/chat/IMTypingChatItem.tsx");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__);
function useLastMessageTime(chat){return Object(_util_receipt_formatting__WEBPACK_IMPORTED_MODULE_6__["useFormattedReceipt"])(chat.lastMessageTime);}function ChatSidebarItem(_ref){var chat=_ref.chat,style=_ref.style;var chatName=Object(_hooks_useChatName__WEBPACK_IMPORTED_MODULE_4__["default"])(chat);var currentChat=Object(_transcript_ChatTranscriptFoundation__WEBPACK_IMPORTED_MODULE_8__["useCurrentChat"])();var lastMessageTime=useLastMessageTime(chat);var isTyping=Object(react_redux__WEBPACK_IMPORTED_MODULE_1__["useSelector"])(function(state){return Object(_app_reducers_chats__WEBPACK_IMPORTED_MODULE_3__["selectTypingStatus"])(state,chat.id);});var isActive=(currentChat===null||currentChat===void 0?void 0:currentChat.id)===chat.id;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsxs"])(react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Link"],{to:"/chats/".concat(chat.id),"attr-chat-id":chat.id,className:"chat-sidebar-item","attr-chat-active":isActive.toString(),"attr-unread-count":chat.unreadMessageCount,style:style,children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsx"])("div",{className:"chat-sidebar-item--image",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsx"])(_chat_ChatBubble__WEBPACK_IMPORTED_MODULE_7__["default"],{chat:chat})}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsxs"])("div",{className:"chat-sidebar-item--details",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsxs"])("span",{className:"chat-sidebar-item--title",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsx"])("span",{className:"chat-sidebar-item--title-label",children:chatName}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsx"])("span",{className:"chat-sidebar-item--title-timestamp",children:lastMessageTime})]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsx"])("span",{className:"chat-sidebar-item--summary",children:isTyping?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsx"])("div",{"data-item-type":"typing",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsx"])("div",{className:"item-inner",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsx"])(_transcript_items_chat_IMTypingChatItem__WEBPACK_IMPORTED_MODULE_9__["default"],{})})}):chat.lastMessage||""})]})]});}/* harmony default export */ __webpack_exports__["default"] = (ChatSidebarItem);

/***/ }),

/***/ "./src/components/bar/ChatBar.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return ChatBar; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _svgr_webpack_svgo_titleProp_ref_assets_magnifying_glass_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/@svgr/webpack/lib/index.js?-svgo,+titleProp,+ref!./src/assets/magnifying-glass.svg");
/* harmony import */ var _svgr_webpack_svgo_titleProp_ref_assets_pen_pencil_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/@svgr/webpack/lib/index.js?-svgo,+titleProp,+ref!./src/assets/pen.pencil.svg");
/* harmony import */ var _contexts_ChatSearchContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/contexts/ChatSearchContext.tsx");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__);
function ChatBar(){var _useContext=Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(_contexts_ChatSearchContext__WEBPACK_IMPORTED_MODULE_3__["ChatSearchContext"]),searchCriteria=_useContext.searchCriteria,setSearchCriteria=_useContext.setSearchCriteria;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__["jsxs"])("div",{className:"chat-toolbar",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__["jsxs"])("label",{className:"search-field",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__["jsx"])(_svgr_webpack_svgo_titleProp_ref_assets_magnifying_glass_svg__WEBPACK_IMPORTED_MODULE_1__["ReactComponent"],{}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__["jsx"])("input",{type:"search",placeholder:"Search",value:searchCriteria||"",onChange:function onChange(event){setSearchCriteria(event.target.value);}})]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__["jsx"])("button",{className:"new-chat",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__["jsx"])(_svgr_webpack_svgo_titleProp_ref_assets_pen_pencil_svg__WEBPACK_IMPORTED_MODULE_2__["ReactComponent"],{})})]});}

/***/ }),

/***/ "./src/components/bar/TranscriptBar.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return TranscriptBar; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _hooks_useChatName__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/hooks/useChatName.ts");
/* harmony import */ var _transcript_ChatTranscriptFoundation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/components/transcript/ChatTranscriptFoundation.tsx");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__);
function TranscriptBar(){var chat=Object(_transcript_ChatTranscriptFoundation__WEBPACK_IMPORTED_MODULE_2__["useCurrentChat"])();var chatName=Object(_hooks_useChatName__WEBPACK_IMPORTED_MODULE_1__["default"])(chat);return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__["jsx"])("div",{className:"transcript-toolbar",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__["jsx"])("div",{className:"chat-name",children:chatName})});}

/***/ }),

/***/ "./src/components/chat/ChatBubble.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatStyle", function() { return ChatStyle; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _app_connection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/app/connection.ts");
/* harmony import */ var _hooks_useContactResolver__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/hooks/useContactResolver.ts");
/* harmony import */ var _contacts_CNContactBubble__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/components/contacts/CNContactBubble.tsx");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__);
var ChatStyle;(function(ChatStyle){ChatStyle[ChatStyle["group"]=43]="group";ChatStyle[ChatStyle["solo"]=45]="solo";})(ChatStyle||(ChatStyle={}));function DMBubble(props){var chat=props.chat;var _useState=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])([]),_useState2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__["default"])(_useState,2),recipientID=_useState2[0],setRecipientID=_useState2[1];Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function(){setRecipientID(chat.participants);},[chat]);var contacts=Object(_hooks_useContactResolver__WEBPACK_IMPORTED_MODULE_3__["useContactResolver"])(recipientID);return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsx"])(_contacts_CNContactBubble__WEBPACK_IMPORTED_MODULE_4__["default"],{className:"chat-bubble--image",contact:contacts[0]});}function GroupChatBubble(props){var chat=props.chat;var _useState3=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])([]),_useState4=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__["default"])(_useState3,2),lastTwoHandleIDs=_useState4[0],setLastTwoHandleIDs=_useState4[1];Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function(){setLastTwoHandleIDs(chat.participants.slice(0,2));},[chat]);var contacts=Object(_hooks_useContactResolver__WEBPACK_IMPORTED_MODULE_3__["useContactResolver"])(lastTwoHandleIDs);return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsxs"])("div",{className:"chat-bubble--multi-container",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsx"])(_contacts_CNContactBubble__WEBPACK_IMPORTED_MODULE_4__["default"],{className:"chat-bubble--image",contact:contacts[0]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsx"])(_contacts_CNContactBubble__WEBPACK_IMPORTED_MODULE_4__["default"],{className:"chat-bubble--image",contact:contacts[1]})]});}function ChatBubble(props){var chat=props.chat;if(chat.style===ChatStyle.group){if(chat.groupPhotoID){return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsx"])("div",{className:"cn-bubble chat-bubble--image",style:{backgroundImage:"url(".concat(_app_connection__WEBPACK_IMPORTED_MODULE_2__["apiClient"].attachmentURL(chat.groupPhotoID),")")}});}else{return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsx"])(GroupChatBubble,{chat:chat});}}else{return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsx"])(DMBubble,{chat:chat});}}/* harmony default export */ __webpack_exports__["default"] = (ChatBubble);

/***/ }),

/***/ "./src/components/contacts/CNContactBubble.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CNContactBubble; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _app_connection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/app/connection.ts");
/* harmony import */ var _styles_contacts_CNContactBubble_scss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/styles/contacts/CNContactBubble.scss");
/* harmony import */ var _styles_contacts_CNContactBubble_scss__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_styles_contacts_CNContactBubble_scss__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__);
function CNContactBubble(props){var contact=props.contact;var _useState=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(null),_useState2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__["default"])(_useState,2),backgroundPhotoURL=_useState2[0],setBackgroundPhotoURL=_useState2[1];var _useState3=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(null),_useState4=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__["default"])(_useState3,2),contactInitials=_useState4[0],setContactInitials=_useState4[1];Object(react__WEBPACK_IMPORTED_MODULE_1__["useLayoutEffect"])(function(){setBackgroundPhotoURL((contact===null||contact===void 0?void 0:contact.hasPicture)?_app_connection__WEBPACK_IMPORTED_MODULE_2__["apiClient"].contactPhotoURL(contact.id):null);if(contact){var firstName=contact.firstName,lastName=contact.lastName;if(!firstName&&!lastName)setContactInitials(null);else{var initials="";if(firstName)initials+=firstName[0].toUpperCase();if(lastName)initials+=lastName[0].toUpperCase();setContactInitials(initials);}}else{setContactInitials(null);}},[contact]);return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__["jsx"])("div",{className:"".concat(backgroundPhotoURL?"cn-bubble":contactInitials?"cn-bubble cn-bubble-initials":"cn-bubble cn-bubble-empty").concat(props.className?" ".concat(props.className):""),style:backgroundPhotoURL?{backgroundImage:"url(".concat(backgroundPhotoURL,")")}:{},children:contactInitials});}

/***/ }),

/***/ "./src/components/devtools/DevtoolsRoot.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DevtoolsRoot; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _sections_DebugSettings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/components/devtools/sections/DebugSettings.tsx");
/* harmony import */ var _sections_GroupSettings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/components/devtools/sections/GroupSettings.tsx");
/* harmony import */ var _sections_Settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/components/devtools/sections/Settings.tsx");
/* harmony import */ var _sections_Statistics__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/components/devtools/sections/Statistics.tsx");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__);
function DevtoolsRoot(){return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsxs"])("div",{className:"devtools-root",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsx"])(_sections_Statistics__WEBPACK_IMPORTED_MODULE_4__["default"],{}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsx"])(_sections_DebugSettings__WEBPACK_IMPORTED_MODULE_1__["default"],{}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsx"])(_sections_GroupSettings__WEBPACK_IMPORTED_MODULE_2__["default"],{}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsx"])(_sections_Settings__WEBPACK_IMPORTED_MODULE_3__["default"],{})]});}

/***/ }),

/***/ "./src/components/devtools/presentation/DebugBoolean.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DebugBoolean; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__);
function DebugBoolean(_ref){var name=_ref.name,value=_ref.value,onInput=_ref.onInput;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__["jsxs"])("label",{className:"detail-row detail-checkbox",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__["jsx"])("span",{className:"detail-label",children:name}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__["jsx"])("input",{type:"checkbox",className:"detail-info",checked:value,onChange:function onChange(){return onInput(!value);}})]});}

/***/ }),

/***/ "./src/components/devtools/presentation/DebugDetails.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DebugDetails; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__);
function DebugDetails(_ref){var details=_ref.details;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__["jsx"])("div",{className:"debug-details",children:details.map(function(_ref2,index){var _ref3=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__["default"])(_ref2,2),name=_ref3[0],value=_ref3[1];return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__["jsxs"])("div",{className:"detail-row",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__["jsx"])("span",{className:"detail-label",children:name===null||name===void 0?void 0:name.toString()}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__["jsx"])("span",{className:"detail-info",children:value===null||value===void 0?void 0:value.toString()})]},index);})});}

/***/ }),

/***/ "./src/components/devtools/sections/DebugSettings.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DebugSettings; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react-redux/es/index.js");
/* harmony import */ var _app_reducers_debug__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/app/reducers/debug.ts");
/* harmony import */ var _app_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/app/store.ts");
/* harmony import */ var _presentation_DebugBoolean__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/components/devtools/presentation/DebugBoolean.tsx");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__);
function DebugSettings(){var isPrivacy=Object(react_redux__WEBPACK_IMPORTED_MODULE_1__["useSelector"])(_app_reducers_debug__WEBPACK_IMPORTED_MODULE_2__["selectIsPrivacyMode"]);return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsx"])(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,{children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsxs"])("details",{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsx"])("summary",{children:"Debug Settings"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsx"])(_presentation_DebugBoolean__WEBPACK_IMPORTED_MODULE_4__["default"],{name:"Privacy Mode",value:isPrivacy,onInput:function onInput(newIsPrivacy){return _app_store__WEBPACK_IMPORTED_MODULE_3__["store"].dispatch(Object(_app_reducers_debug__WEBPACK_IMPORTED_MODULE_2__["setPrivacyMode"])(newIsPrivacy));}})]})});}

/***/ }),

/***/ "./src/components/devtools/sections/GroupSettings.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return GroupSettings; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _app_connection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/app/connection.ts");
/* harmony import */ var _hooks_useEvent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/hooks/useEvent.ts");
/* harmony import */ var _react_window_dynamic_DynamicSizeList__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/components/react-window-dynamic/DynamicSizeList.tsx");
/* harmony import */ var _transcript_ChatTranscriptFoundation__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./src/components/transcript/ChatTranscriptFoundation.tsx");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__);
function DraftInput(_ref){var label=_ref.label,placeholder=_ref.placeholder,value=_ref.value,commit=_ref.commit;var _useState=Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(null),_useState2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__["default"])(_useState,2),draft=_useState2[0],setDraft=_useState2[1];var _useState3=Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(false),_useState4=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__["default"])(_useState3,2),busy=_useState4[0],setBusy=_useState4[1];if(draft===null)setDraft(value);Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function(){setDraft(value);},[value]);return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsxs"])("label",{className:"detail-row detail-input",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])("span",{className:"detail-label",children:label}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])("input",{type:"text",placeholder:placeholder,value:draft,onChange:function onChange(e){setDraft(e.target.value);},onKeyDown:/*#__PURE__*/function(){var _ref2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(/*#__PURE__*/_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(e){return _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!busy){_context.next=2;break;}return _context.abrupt("return");case 2:if(!(e.key!=="Enter")){_context.next=4;break;}return _context.abrupt("return");case 4:e.preventDefault();setBusy(true);_context.prev=6;_context.next=9;return commit(draft);case 9:_context.prev=9;setBusy(false);return _context.finish(9);case 12:case"end":return _context.stop();}}},_callee,null,[[6,,9,12]]);}));return function(_x){return _ref2.apply(this,arguments);};}()})]});}var mergeClassName=function mergeClassName(className,className1){return"".concat(className).concat(className1?" ".concat(className1):"");};function useBusyController(_ref3){var disabled=_ref3.disabled,fn=_ref3.fn;var _useState5=Object(react__WEBPACK_IMPORTED_MODULE_3__["useState"])(false),_useState6=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__["default"])(_useState5,2),busy=_useState6[0],setBusy=_useState6[1];var canProceed=!(busy||disabled);return[!canProceed,/*#__PURE__*/Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(/*#__PURE__*/_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(){var _args2=arguments;return _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(canProceed){_context2.next=2;break;}return _context2.abrupt("return");case 2:setBusy(true);_context2.next=5;return fn.apply(void 0,_args2);case 5:setBusy(false);case 6:case"end":return _context2.stop();}}},_callee2);}))];}function DebugCheckbox(_ref5){var disabled=_ref5.disabled,changed=_ref5.changed,className=_ref5.className,children=_ref5.children,value=_ref5.value;var _useBusyController=useBusyController({disabled:disabled,fn:changed}),_useBusyController2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__["default"])(_useBusyController,2),isDisabled=_useBusyController2[0],fire=_useBusyController2[1];return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsxs"])("label",{className:mergeClassName("detail-row detail-checkbox",className),children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])("span",{className:"detail-label",children:children}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])("input",{disabled:isDisabled,type:"checkbox",className:"detail-info",checked:value,onChange:/*#__PURE__*/function(){var _ref6=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(/*#__PURE__*/_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(ev){return _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:fire(ev.target.checked);case 1:case"end":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref6.apply(this,arguments);};}()})]});}function DebugButton(_ref7){var disabled=_ref7.disabled,click=_ref7.click,className=_ref7.className,children=_ref7.children;var _useBusyController3=useBusyController({disabled:disabled,fn:click}),_useBusyController4=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__["default"])(_useBusyController3,2),isDisabled=_useBusyController4[0],fire=_useBusyController4[1];return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])("button",{className:mergeClassName("detail-row detail-btn",className),disabled:isDisabled,onClick:function onClick(e){e.preventDefault();fire();},children:children});}function GroupSettings(){var currentChat=Object(_transcript_ChatTranscriptFoundation__WEBPACK_IMPORTED_MODULE_7__["useCurrentChat"])();if(!currentChat)return null;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsxs"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["Fragment"],{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsxs"])("details",{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])("summary",{children:"Chat Settings"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsxs"])("div",{className:"debug-details",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])(DebugCheckbox,{value:currentChat.readReceipts,changed:function changed(readReceipts){return _app_connection__WEBPACK_IMPORTED_MODULE_4__["apiClient"].chats.patchProperties(currentChat.id,{readReceipts:readReceipts});},children:"Send Read Receipts"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])(DebugCheckbox,{value:currentChat.ignoreAlerts,changed:function changed(ignoreAlerts){return _app_connection__WEBPACK_IMPORTED_MODULE_4__["apiClient"].chats.patchProperties(currentChat.id,{ignoreAlerts:ignoreAlerts});},children:"Ignore Alerts"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])(DebugButton,{click:function click(){return _app_connection__WEBPACK_IMPORTED_MODULE_4__["apiClient"].chats.readAllMessages(currentChat.id);},children:"Mark All As Read"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])(DebugButton,{click:function click(){return _app_connection__WEBPACK_IMPORTED_MODULE_4__["apiClient"].chats.setTyping(currentChat.id,true);},children:"Start Typing"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])(DebugButton,{click:function click(){return _app_connection__WEBPACK_IMPORTED_MODULE_4__["apiClient"].chats.setTyping(currentChat.id,false);},children:"Stop Typing"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])(DebugButton,{click:function click(){return _app_connection__WEBPACK_IMPORTED_MODULE_4__["apiClient"].chats.deleteChat(currentChat.id);},children:"Delete Chat"})]})]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsxs"])("details",{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])("summary",{children:"DSL"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])("div",{className:"debug-details",children:_react_window_dynamic_DynamicSizeList__WEBPACK_IMPORTED_MODULE_6__["DSLDebugTools"].map(function(_ref8){var name=_ref8.name,event=_ref8.event;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])(DebugButton,{click:function click(){return _hooks_useEvent__WEBPACK_IMPORTED_MODULE_5__["EventBus"].emit(event);},children:name},name);})})]}),currentChat.style===43?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsxs"])("details",{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])("summary",{children:"Group Settings"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])(DraftInput,{label:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["Fragment"],{children:"Group Name"}),placeholder:"Group Name",value:currentChat.displayName,commit:function commit(newGroupName){_app_connection__WEBPACK_IMPORTED_MODULE_4__["apiClient"].chats.rename(currentChat.id,newGroupName||null);}}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsxs"])("div",{className:"detail-row",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])("span",{className:"detail-label",children:"Participants"}),currentChat.participants.map(function(participant){return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsxs"])("div",{className:"detail-info",children:[participant,/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])(DebugButton,{click:/*#__PURE__*/Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(/*#__PURE__*/_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee4(){return _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _app_connection__WEBPACK_IMPORTED_MODULE_4__["apiClient"].chats.removeParticipants(currentChat.id,[participant]);case 2:case"end":return _context4.stop();}}},_callee4);})),children:"Remove"})]},participant);})]})]}):null]});}

/***/ }),

/***/ "./src/components/devtools/sections/Settings.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DebugSettings; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/react-redux/es/index.js");
/* harmony import */ var _app_connection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/app/connection.ts");
/* harmony import */ var _app_reducers_debug__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/app/reducers/debug.ts");
/* harmony import */ var _app_store__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/app/store.ts");
/* harmony import */ var _util_use_persistent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/util/use-persistent.ts");
/* harmony import */ var _presentation_DebugBoolean__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./src/components/devtools/presentation/DebugBoolean.tsx");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__);
var shortHash=function(){return{"branch":"master","tags":[],"commit":{"shortHash":"cd13b8f","hash":"cd13b8f0d1f614fae76d82053fe0fd9a752571c1","date":"2021-04-07T11:46:28-04:00","message":"Added staging builder"}};}().commit.shortHash;function DebugSettings(){var isScrollingInverted=Object(react_redux__WEBPACK_IMPORTED_MODULE_2__["useSelector"])(_app_reducers_debug__WEBPACK_IMPORTED_MODULE_4__["selectUseInvertedScrolling"]);var _usePersistent=Object(_util_use_persistent__WEBPACK_IMPORTED_MODULE_6__["usePersistent"])("imcore-host","localhost"),_usePersistent2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__["default"])(_usePersistent,2),imCoreHost=_usePersistent2[0],setIMCoreHost=_usePersistent2[1];var _useState=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(false),_useState2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__["default"])(_useState,2),isReconnecting=_useState2[0],setIsReconnecting=_useState2[1];return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment,{children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsxs"])("details",{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])("summary",{children:"Settings"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])(_presentation_DebugBoolean__WEBPACK_IMPORTED_MODULE_7__["default"],{name:"Scrolling Fix",value:isScrollingInverted,onInput:function onInput(e){return _app_store__WEBPACK_IMPORTED_MODULE_5__["store"].dispatch(Object(_app_reducers_debug__WEBPACK_IMPORTED_MODULE_4__["setInvertedScrolling"])(e));}}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])("button",{className:"detail-row detail-btn",onClick:function onClick(){var initial=isScrollingInverted;_app_store__WEBPACK_IMPORTED_MODULE_5__["store"].dispatch(Object(_app_reducers_debug__WEBPACK_IMPORTED_MODULE_4__["setInvertedScrolling"])(!initial));setTimeout(function(){return _app_store__WEBPACK_IMPORTED_MODULE_5__["store"].dispatch(Object(_app_reducers_debug__WEBPACK_IMPORTED_MODULE_4__["setInvertedScrolling"])(initial));},25);},children:"Reset Scrolling"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsxs"])("label",{className:"detail-row detail-input",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])("span",{className:"detail-label",children:"IMCore Host"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])("input",{type:"text",placeholder:"localhost:8090",value:imCoreHost,onChange:function onChange(event){return setIMCoreHost(event.target.value);}})]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])("button",{className:"detail-row detail-btn",disabled:isReconnecting,onClick:function onClick(){setIsReconnecting(true);Object(_app_connection__WEBPACK_IMPORTED_MODULE_3__["reconnect"])().then(function(){setIsReconnecting(false);});},children:"Reconnect"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])("label",{className:"detail-row",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsxs"])("span",{className:"detail-label",children:["IMCore.React ",shortHash]})})]})});}

/***/ }),

/***/ "./src/components/devtools/sections/Statistics.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Statistics; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_json_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/react-json-view/dist/main.js");
/* harmony import */ var react_json_view__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_json_view__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/react-redux/es/index.js");
/* harmony import */ var _app_reducers_chats__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/app/reducers/chats.ts");
/* harmony import */ var _app_reducers_messages__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/app/reducers/messages.ts");
/* harmony import */ var _chat_ChatBubble__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/components/chat/ChatBubble.tsx");
/* harmony import */ var _transcript_acknowledgments_AcknowledgmentPicker__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./src/components/transcript/acknowledgments/AcknowledgmentPicker.tsx");
/* harmony import */ var _transcript_ChatTranscriptFoundation__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./src/components/transcript/ChatTranscriptFoundation.tsx");
/* harmony import */ var _presentation_DebugDetails__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./src/components/devtools/presentation/DebugDetails.tsx");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__);
function Statistics(){var loadedChats=Object.values(Object(react_redux__WEBPACK_IMPORTED_MODULE_3__["useSelector"])(_app_reducers_chats__WEBPACK_IMPORTED_MODULE_4__["selectChats"])).length;var loadedMessages=Object.values(Object(react_redux__WEBPACK_IMPORTED_MODULE_3__["useSelector"])(_app_reducers_messages__WEBPACK_IMPORTED_MODULE_5__["selectMessages"])).flatMap(function(record){return Object.values(record);}).length;var currentChat=Object(_transcript_ChatTranscriptFoundation__WEBPACK_IMPORTED_MODULE_8__["useCurrentChat"])();var _useHoveredChatItem=Object(_transcript_ChatTranscriptFoundation__WEBPACK_IMPORTED_MODULE_8__["useHoveredChatItem"])(),_useHoveredChatItem2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__["default"])(_useHoveredChatItem,2),hoveredChatItem=_useHoveredChatItem2[0],hoveredMessage=_useHoveredChatItem2[1];var hoveredChat=Object(_transcript_ChatTranscriptFoundation__WEBPACK_IMPORTED_MODULE_8__["useHoveredChat"])();return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsxs"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["Fragment"],{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsxs"])("details",{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsx"])("summary",{children:"Statistics"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsx"])(_presentation_DebugDetails__WEBPACK_IMPORTED_MODULE_9__["default"],{details:[["Loaded Chats",loadedChats],["Loaded Messages",loadedMessages]]})]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsxs"])("details",{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsx"])("summary",{children:"Chat Statistics"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsx"])(_presentation_DebugDetails__WEBPACK_IMPORTED_MODULE_9__["default"],{details:[["Current Chat",currentChat===null||currentChat===void 0?void 0:currentChat.id],["Muted?",(currentChat===null||currentChat===void 0?void 0:currentChat.ignoreAlerts)?"Yes":"No"],["Send Read Receipts?",(currentChat===null||currentChat===void 0?void 0:currentChat.readReceipts)?"Yes":"No"],["Service",currentChat===null||currentChat===void 0?void 0:currentChat.service],["Group?",(currentChat===null||currentChat===void 0?void 0:currentChat.style)===_chat_ChatBubble__WEBPACK_IMPORTED_MODULE_6__["ChatStyle"].group?"Yes":"No"]]})]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsxs"])("details",{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsx"])("summary",{children:"Message Information"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsx"])(react_json_view__WEBPACK_IMPORTED_MODULE_2___default.a,{src:hoveredMessage||{}})]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsxs"])("details",{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsx"])("summary",{children:"Acknowledgments"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsx"])(_presentation_DebugDetails__WEBPACK_IMPORTED_MODULE_9__["default"],{details:[["Hovered Message ID",hoveredMessage===null||hoveredMessage===void 0?void 0:hoveredMessage.id],["Hovered Message Sender",hoveredMessage===null||hoveredMessage===void 0?void 0:hoveredMessage.sender],["Hovered Message Time",(hoveredMessage===null||hoveredMessage===void 0?void 0:hoveredMessage.time)||NaN],["Hovered ChatItem ID",hoveredChatItem===null||hoveredChatItem===void 0?void 0:hoveredChatItem.payload.id]]}),hoveredMessage&&hoveredChatItem?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsx"])(_transcript_acknowledgments_AcknowledgmentPicker__WEBPACK_IMPORTED_MODULE_7__["default"],{message:hoveredMessage,chatItem:hoveredChatItem}):null]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsxs"])("details",{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsx"])("summary",{children:"Chat Information"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__["jsx"])(react_json_view__WEBPACK_IMPORTED_MODULE_2___default.a,{src:hoveredChat||{}})]})]});}

/***/ }),

/***/ "./src/components/react-window-dynamic/DynamicSizeList.Foundation.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DynamicListContext", function() { return DynamicListContext; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useInvertScrollDirection", function() { return useInvertScrollDirection; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isMacOS", function() { return isMacOS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hostIsMacOS", function() { return hostIsMacOS; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
var DynamicListContext=/*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_0__["createContext"])({});var useInvertScrollDirection=function useInvertScrollDirection(enabled){var ref=Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();var invertedWheelEvent=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function(e){if(ref.current){ref.current.scrollTop+=-e.deltaY;e.preventDefault();}},[]);Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function(){return function(){if(ref.current){ref.current.removeEventListener("wheel",invertedWheelEvent);}};},[]);var repair=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function(){if(!ref.current)return;ref.current.removeEventListener("wheel",invertedWheelEvent);if(enabled)ref.current.addEventListener("wheel",invertedWheelEvent);},[ref,enabled,invertedWheelEvent]);Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function(){return repair();},[enabled,repair,ref]);return function(incomingRef){if(!incomingRef){return;}ref.current=incomingRef;};};function isMacOS(){return navigator.userAgent.toLowerCase().includes("mac os x");};var hostIsMacOS=isMacOS();

/***/ }),

/***/ "./src/components/react-window-dynamic/DynamicSizeList.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RowMeasurer", function() { return RowMeasurer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DSLDebugTools", function() { return DSLDebugTools; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DynamicSizeList; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./node_modules/react-redux/es/index.js");
/* harmony import */ var react_window__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./node_modules/react-window/dist/index.esm.js");
/* harmony import */ var _app_reducers_debug__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./src/app/reducers/debug.ts");
/* harmony import */ var _hooks_useEvent__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./src/hooks/useEvent.ts");
/* harmony import */ var _util_log__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__("./src/util/log.ts");
/* harmony import */ var _DynamicSizeList_Foundation__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__("./src/components/react-window-dynamic/DynamicSizeList.Foundation.tsx");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__);
function RowMeasurer(_ref){var index=_ref.index,id=_ref.id,width=_ref.width,data=_ref.data,style=_ref.style,children=_ref.children,memoState=_ref.memoState;var _useContext=Object(react__WEBPACK_IMPORTED_MODULE_5__["useContext"])(_DynamicSizeList_Foundation__WEBPACK_IMPORTED_MODULE_11__["DynamicListContext"]),setSize=_useContext.setSize;var rowRoot=Object(react__WEBPACK_IMPORTED_MODULE_5__["useRef"])(null);var observer=Object(react__WEBPACK_IMPORTED_MODULE_5__["useRef"])(new ResizeObserver(function(_ref2){var _ref3=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__["default"])(_ref2,1),entry=_ref3[0];if(setSize&&entry.contentRect.height){setSize(id,entry.contentRect.height);}}));Object(react__WEBPACK_IMPORTED_MODULE_5__["useEffect"])(function(){if(rowRoot.current){observer.current.disconnect();observer.current.observe(rowRoot.current);}},[id,setSize,width]);return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__["jsx"])("div",{style:style,children:children({ref:rowRoot,index:index,data:data,id:id,width:width,style:style,memoState:memoState})});}var Log=Object(_util_log__WEBPACK_IMPORTED_MODULE_10__["default"])("ReactWindow.DynamicSizeList","info");var sizeStorage=new Map();var DSLDebugTools=[{name:"Reset DSL",event:"resetDynamicSizeList"},{name:"Dump DSL ListRef",event:"dumpDSLListRef"},{name:"Dump DSL SizeMap",event:"dumpDSLMeasurements"},{name:"Rescroll DSL",event:"dslRescroll"}];function DynamicSizeList(props){var listRef=Object(react__WEBPACK_IMPORTED_MODULE_5__["useRef"])(null);var scrollWatcher=Object(_DynamicSizeList_Foundation__WEBPACK_IMPORTED_MODULE_11__["useInvertScrollDirection"])(Object(react_redux__WEBPACK_IMPORTED_MODULE_6__["useSelector"])(_app_reducers_debug__WEBPACK_IMPORTED_MODULE_8__["selectUseInvertedScrolling"])||_DynamicSizeList_Foundation__WEBPACK_IMPORTED_MODULE_11__["hostIsMacOS"]);var sizeMap=react__WEBPACK_IMPORTED_MODULE_5___default.a.useRef({});var resetList=Object(react__WEBPACK_IMPORTED_MODULE_5__["useCallback"])(/*#__PURE__*/Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__["default"])(/*#__PURE__*/_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee(){var _listRef$current;return _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:Log.debug("Resetting DynamicSizeList");(_listRef$current=listRef.current)===null||_listRef$current===void 0?void 0:_listRef$current.resetAfterIndex(0);case 2:case"end":return _context.stop();}}},_callee);})),[listRef]);var setSize=react__WEBPACK_IMPORTED_MODULE_5___default.a.useCallback(function(id,size){// Performance: Only update the sizeMap and reset cache if an actual value changed
if(sizeMap.current[id]!==size){Log.debug("DynamicSizeList caught resize",{id:id,from:sizeMap.current[id],to:size});sizeMap.current=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__["default"])(Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__["default"])({},sizeMap.current),{},Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])({},id,size));sizeStorage.set(props.nonce,sizeMap.current);if(listRef.current){// Clear cached data and rerender
Log.debug("DynamicSizeList rerendering VariableSizeList");resetList();}}},[props.nonce,listRef,resetList,sizeMap]);Object(_hooks_useEvent__WEBPACK_IMPORTED_MODULE_9__["useEvent"])("resetDynamicSizeList",resetList);Object(_hooks_useEvent__WEBPACK_IMPORTED_MODULE_9__["useEvent"])("dumpDSLListRef",function(){return console.log(listRef.current);});Object(_hooks_useEvent__WEBPACK_IMPORTED_MODULE_9__["useEvent"])("dumpDSLMeasurements",function(){return console.log(sizeMap.current);});Object(_hooks_useEvent__WEBPACK_IMPORTED_MODULE_9__["useEvent"])("dslRescroll",function(){var _listRef$current2;(_listRef$current2=listRef.current)===null||_listRef$current2===void 0?void 0:_listRef$current2.scrollTo(listRef.current.state.scrollOffset);});Object(react__WEBPACK_IMPORTED_MODULE_5__["useEffect"])(function(){resetList();},[props.itemData.length]);Object(react__WEBPACK_IMPORTED_MODULE_5__["useEffect"])(function(){var _listRef$current3,_listRef$current4;sizeMap.current=sizeStorage.get(props.nonce)||{};(_listRef$current3=listRef.current)===null||_listRef$current3===void 0?void 0:_listRef$current3.resetAfterIndex(0);(_listRef$current4=listRef.current)===null||_listRef$current4===void 0?void 0:_listRef$current4.scrollToItem(0);Log.debug("Cleared caches");},[props.nonce]);var getSize=react__WEBPACK_IMPORTED_MODULE_5___default.a.useCallback(function(index){return sizeMap.current[props.getID(index)]||25;},[props.itemData,sizeMap]);// Increases accuracy by calculating an average row height
// Fixes the scrollbar behaviour described here: https://github.com/bvaughn/react-window/issues/408
var calcEstimatedSize=react__WEBPACK_IMPORTED_MODULE_5___default.a.useCallback(function(){var keys=Object.keys(sizeMap.current);var estimatedHeight=keys.reduce(function(p,i){return p+sizeMap.current[i];},0);return estimatedHeight/keys.length;},[sizeMap]);var MemoizedRowMeasurer=Object(react__WEBPACK_IMPORTED_MODULE_5__["useMemo"])(function(){Log.debug("Regenerating memo component");var createRendererProps=function createRendererProps(rowProps){var listProps=arguments.length>1&&arguments[1]!==undefined?arguments[1]:props;var memoState=arguments.length>2&&arguments[2]!==undefined?arguments[2]:props.memoState;return Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__["default"])(Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__["default"])({},rowProps),{},{id:rowProps.data[rowProps.index].id,width:listProps.width,memoState:memoState});};function Renderer(rowProps){return/*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_5__["createElement"])(RowMeasurer,Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__["default"])(Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__["default"])({},createRendererProps(rowProps)),{},{key:rowProps.data[rowProps.index].id}),props.children);}return props.isSame?/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default.a.memo(Renderer,function(prevProps,nextProps){return Object(react_window__WEBPACK_IMPORTED_MODULE_7__["areEqual"])(prevProps,nextProps)&&props.isSame(createRendererProps(prevProps),createRendererProps(nextProps));}):Renderer;},[props.isSame,props.memoState]);return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__["jsx"])(_DynamicSizeList_Foundation__WEBPACK_IMPORTED_MODULE_11__["DynamicListContext"].Provider,{value:{setSize:setSize},children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__["jsx"])(react_window__WEBPACK_IMPORTED_MODULE_7__["VariableSizeList"],{ref:listRef,width:props.width,height:props.height,itemCount:props.itemCount,itemData:props.itemData,itemSize:getSize,estimatedItemSize:calcEstimatedSize(),outerRef:scrollWatcher,overscanCount:props.overscanCount,onItemsRendered:props.nearEnd?function(_ref5){var overscanStartIndex=_ref5.overscanStartIndex,overscanStopIndex=_ref5.overscanStopIndex;return overscanStopIndex>=props.itemData.length-10?props.nearEnd():undefined;}:undefined,itemKey:props.itemKey,children:MemoizedRowMeasurer})});}

/***/ }),

/***/ "./src/components/transcript/ChatTranscript.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return ChatTranscript; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/react-redux/es/index.js");
/* harmony import */ var react_virtualized_auto_sizer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./node_modules/react-virtualized-auto-sizer/dist/index.esm.js");
/* harmony import */ var _app_connection__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./src/app/connection.ts");
/* harmony import */ var _app_reducers_presence__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./src/app/reducers/presence.ts");
/* harmony import */ var _app_store__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./src/app/store.ts");
/* harmony import */ var _util_log__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__("./src/util/log.ts");
/* harmony import */ var _react_window_dynamic_DynamicSizeList__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__("./src/components/react-window-dynamic/DynamicSizeList.tsx");
/* harmony import */ var _ChatTranscriptFoundation__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__("./src/components/transcript/ChatTranscriptFoundation.tsx");
/* harmony import */ var _composition_Composition__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__("./src/components/transcript/composition/Composition.tsx");
/* harmony import */ var _items_Message__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__("./src/components/transcript/items/Message.tsx");
/* harmony import */ var _items_Message_foundation__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__("./src/components/transcript/items/Message.foundation.ts");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__);
var MemoLog=Object(_util_log__WEBPACK_IMPORTED_MODULE_10__["default"])("MessageMemo","error");function messagesAreRenderSame(prevMessage,nextMessage){if(!prevMessage&&!nextMessage||!(prevMessage&&nextMessage))return false;if(prevMessage.id!==nextMessage.id){MemoLog.info("MessageID not equal (%s !== %s)",prevMessage.id,nextMessage.id);return false;}else if(!Object(_items_Message_foundation__WEBPACK_IMPORTED_MODULE_15__["itemsAreShallowEqual"])(prevMessage,nextMessage)){MemoLog.info("Items are not shallow equal (%o !== %o)",prevMessage,nextMessage);return false;}else{MemoLog.debug("Items are same");return true;}}function compareMessageRenderProps(prevProps,nextProps){var prevBeforeMessage=prevProps.data[prevProps.index-1];var nextBeforeMessage=nextProps.data[nextProps.index-1];var prevMessage=prevProps.data[prevProps.index];var nextMessage=nextProps.data[nextProps.index];var prevAfterMessage=prevProps.data[prevProps.index+1];var nextAfterMessage=nextProps.data[nextProps.index+1];return messagesAreRenderSame(prevBeforeMessage,nextBeforeMessage)&&messagesAreRenderSame(prevMessage,nextMessage)&&messagesAreRenderSame(prevAfterMessage,nextAfterMessage);}function getLastReadAndDeliveredFromMe(messages){var lastDeliveredFromMe=undefined,lastReadFromMe=undefined;var _iterator=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_3__["default"])(messages),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_step.value,id=_step$value.id,fromMe=_step$value.fromMe,isDelivered=_step$value.isDelivered,timeRead=_step$value.timeRead;if(!lastDeliveredFromMe&&fromMe&&isDelivered)lastDeliveredFromMe=id;if(!lastReadFromMe&&fromMe&&timeRead)lastReadFromMe=id;if(lastDeliveredFromMe&&lastReadFromMe)break;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return[lastDeliveredFromMe,lastReadFromMe];}function searchNodeForMessageRelations(node){var chatItemID=null,messageID=null;var next=node;while(next!==null){if(next instanceof HTMLElement){if(!chatItemID)chatItemID=next.getAttribute("attr-chat-item-id");if(!messageID)messageID=next.getAttribute("attr-message-id");}if(chatItemID&&messageID||messageID&&!chatItemID)break;next=next.parentNode;}return{chatItemID:chatItemID,messageID:messageID};}function ChatTranscript(){var chat=Object(_ChatTranscriptFoundation__WEBPACK_IMPORTED_MODULE_12__["useCurrentChat"])();var _useCurrentMessages=Object(_ChatTranscriptFoundation__WEBPACK_IMPORTED_MODULE_12__["useCurrentMessages"])(),_useCurrentMessages2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__["default"])(_useCurrentMessages,2),messages=_useCurrentMessages2[0],loadMore=_useCurrentMessages2[1];var _useMemo=Object(react__WEBPACK_IMPORTED_MODULE_4__["useMemo"])(function(){return getLastReadAndDeliveredFromMe(messages);},[JSON.stringify(messages)]),_useMemo2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__["default"])(_useMemo,2),lastDeliveredFromMe=_useMemo2[0],lastReadFromMe=_useMemo2[1];var unreadCount=(chat===null||chat===void 0?void 0:chat.unreadMessageCount)||0;var isVisible=Object(react_redux__WEBPACK_IMPORTED_MODULE_5__["useSelector"])(_app_reducers_presence__WEBPACK_IMPORTED_MODULE_8__["selectVisibilityState"]);var itemKey=Object(react__WEBPACK_IMPORTED_MODULE_4__["useCallback"])(function(index,data){return data[index].id;},[]);var _useState=Object(react__WEBPACK_IMPORTED_MODULE_4__["useState"])(false),_useState2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__["default"])(_useState,2),processing=_useState2[0],setIsProcessing=_useState2[1];Object(react__WEBPACK_IMPORTED_MODULE_4__["useEffect"])(function(){Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(/*#__PURE__*/_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(){return _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(unreadCount>0&&isVisible&&chat)){_context.next=7;break;}if(!processing){_context.next=3;break;}return _context.abrupt("return");case 3:setIsProcessing(true);_context.next=6;return _app_connection__WEBPACK_IMPORTED_MODULE_7__["apiClient"].chats.readAllMessages(chat.id);case 6:setIsProcessing(false);case 7:case"end":return _context.stop();}}},_callee);}))();},[unreadCount,isVisible,chat]);return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__["jsxs"])("div",{className:"chat-transcript transcript-react-window",onMouseOver:function onMouseOver(event){if(!(event.target instanceof Node))return;var _searchNodeForMessage=searchNodeForMessageRelations(event.target),messageID=_searchNodeForMessage.messageID,chatItemID=_searchNodeForMessage.chatItemID;if(!messageID)return;_app_store__WEBPACK_IMPORTED_MODULE_9__["store"].dispatch(Object(_app_reducers_presence__WEBPACK_IMPORTED_MODULE_8__["chatItemChanged"])({messageID:messageID,chatItemID:chatItemID}));},children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__["jsx"])("div",{className:"message-transcript-container",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__["jsx"])(react_virtualized_auto_sizer__WEBPACK_IMPORTED_MODULE_6__["default"],{children:function children(_ref2){var height=_ref2.height,width=_ref2.width;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__["jsx"])(_react_window_dynamic_DynamicSizeList__WEBPACK_IMPORTED_MODULE_11__["default"],{height:height,width:width,nonce:chat===null||chat===void 0?void 0:chat.id,itemData:messages,getID:function getID(index){var _messages$index;return((_messages$index=messages[index])===null||_messages$index===void 0?void 0:_messages$index.id)||"-1";},itemCount:messages.length,nearEnd:loadMore,memoState:{lastDeliveredFromMe:lastDeliveredFromMe,lastReadFromMe:lastReadFromMe},isSame:compareMessageRenderProps,itemKey:itemKey,children:function children(_ref3){var ref=_ref3.ref,index=_ref3.index,data=_ref3.data;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__["jsx"])(_items_Message__WEBPACK_IMPORTED_MODULE_14__["default"],{eRef:ref,message:data[index],nextMessage:data[index-1],prevMessage:data[index+1],lastDeliveredFromMe:lastDeliveredFromMe,lastReadFromMe:lastReadFromMe});}});}})}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__["jsx"])(_composition_Composition__WEBPACK_IMPORTED_MODULE_13__["default"],{})]});}

/***/ }),

/***/ "./src/components/transcript/ChatTranscriptFoundation.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "reload", function() { return reload; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useMessages", function() { return useMessages; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useCurrentMessages", function() { return useCurrentMessages; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatContext", function() { return ChatContext; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessagesContext", function() { return MessagesContext; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useCurrentChat", function() { return useCurrentChat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useCurrentChatID", function() { return useCurrentChatID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useHoveredMessage", function() { return useHoveredMessage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useHoveredChatItem", function() { return useHoveredChatItem; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useHoveredChat", function() { return useHoveredChat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CurrentChatProvider", function() { return CurrentChatProvider; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CurrentMessagesProvider", function() { return CurrentMessagesProvider; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/react-redux/es/index.js");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/react-router/esm/react-router.js");
/* harmony import */ var _app_connection__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/app/connection.ts");
/* harmony import */ var _app_reducers_chats__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./src/app/reducers/chats.ts");
/* harmony import */ var _app_reducers_messages__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./src/app/reducers/messages.ts");
/* harmony import */ var _app_reducers_presence__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./src/app/reducers/presence.ts");
/* harmony import */ var _util_log__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__("./src/util/log.ts");
/* harmony import */ var _util_message_presentation__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__("./src/util/message-presentation.ts");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__);
var Log=Object(_util_log__WEBPACK_IMPORTED_MODULE_10__["default"])("ChatTranscriptFoundation","info");function reload(_x,_x2){return _reload.apply(this,arguments);}function _reload(){_reload=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["default"])(/*#__PURE__*/_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee3(chatID,before){var recentMessages;return _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _app_connection__WEBPACK_IMPORTED_MODULE_6__["apiClient"].chats.fetchRecentMessages(chatID,{limit:100,before:before});case 2:recentMessages=_context3.sent;Log.info("Received messages for chat %s from REST",chatID);isDoneLedger[chatID]=recentMessages.length<=1;Object(_app_connection__WEBPACK_IMPORTED_MODULE_6__["receiveMessages"])(recentMessages);case 6:case"end":return _context3.stop();}}},_callee3);}));return _reload.apply(this,arguments);}var loadingLedger={};var isDoneLedger={};function useMessages(chatID){var reverse=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var injectTimestamps=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var allMessages=Object(react_redux__WEBPACK_IMPORTED_MODULE_4__["useSelector"])(_app_reducers_messages__WEBPACK_IMPORTED_MODULE_8__["selectMessages"]);var messages=allMessages[chatID||""];Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function(){if(!messages&&chatID){Log.info("Loading initial messages for chat %s",chatID);reload(chatID);}},[messages,chatID]);var processedMessages=Object(react__WEBPACK_IMPORTED_MODULE_3__["useMemo"])(function(){return Object(_util_message_presentation__WEBPACK_IMPORTED_MODULE_11__["prepareMessagesForPresentation"])(messages,reverse,injectTimestamps);},[JSON.stringify(messages)]);return[processedMessages,/*#__PURE__*/Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["default"])(/*#__PURE__*/_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee(){var lastMessage,lastMessageID;return _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(chatID){_context.next=2;break;}return _context.abrupt("return");case 2:if(!(loadingLedger[chatID]||isDoneLedger[chatID])){_context.next=4;break;}return _context.abrupt("return");case 4:loadingLedger[chatID]=true;lastMessage=processedMessages[reverse?processedMessages.length-1:0];lastMessageID=lastMessage[_util_message_presentation__WEBPACK_IMPORTED_MODULE_11__["TIMESTAMP_ASSOCIATION"]]||lastMessage.id;_context.next=9;return reload(chatID,lastMessageID);case 9:loadingLedger[chatID]=false;case 10:case"end":return _context.stop();}}},_callee);}))];}function useCurrentMessages(){var _useContext=Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(MessagesContext),messages=_useContext.messages,loadMore=_useContext.loadMore;return[messages,loadMore];}var ChatContext=/*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_3__["createContext"])({chat:null,chatID:null});var MessagesContext=/*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_3__["createContext"])({messages:[],loadMore:function(){var _loadMore=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["default"])(/*#__PURE__*/_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee2(){return _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",undefined);case 1:case"end":return _context2.stop();}}},_callee2);}));function loadMore(){return _loadMore.apply(this,arguments);}return loadMore;}()});function useCurrentChat(){return Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(ChatContext).chat;}function useCurrentChatID(){return Object(react__WEBPACK_IMPORTED_MODULE_3__["useContext"])(ChatContext).chatID;}function useResolvedMessage(messageID,chatID){var _messages$chatID;var messages=Object(react_redux__WEBPACK_IMPORTED_MODULE_4__["useSelector"])(_app_reducers_messages__WEBPACK_IMPORTED_MODULE_8__["selectMessages"]);var currentChat=useCurrentChat();if(!messageID)return null;if(!chatID)chatID=currentChat===null||currentChat===void 0?void 0:currentChat.id;if(!chatID)return null;return((_messages$chatID=messages[chatID])===null||_messages$chatID===void 0?void 0:_messages$chatID[messageID])||null;}function useHoveredMessage(){var hoveredMessage=Object(react_redux__WEBPACK_IMPORTED_MODULE_4__["useSelector"])(_app_reducers_presence__WEBPACK_IMPORTED_MODULE_9__["selectHoveringOverMessageID"]);return useResolvedMessage(hoveredMessage);}function useHoveredChatItem(){var hoveredMessage=useHoveredMessage();var hoveredChatItemID=Object(react_redux__WEBPACK_IMPORTED_MODULE_4__["useSelector"])(_app_reducers_presence__WEBPACK_IMPORTED_MODULE_9__["selectHoveringOverChatItemID"]);if(!hoveredChatItemID||!hoveredMessage)return[null,hoveredMessage];return[hoveredMessage.items.find(function(item){return item.payload.id===hoveredChatItemID;})||null,hoveredMessage];}function useHoveredChat(){var hoveredChat=Object(react_redux__WEBPACK_IMPORTED_MODULE_4__["useSelector"])(_app_reducers_presence__WEBPACK_IMPORTED_MODULE_9__["selectHoveringOverChatID"]);var chats=Object(react_redux__WEBPACK_IMPORTED_MODULE_4__["useSelector"])(_app_reducers_chats__WEBPACK_IMPORTED_MODULE_7__["selectChats"]);if(!hoveredChat)return null;return chats[hoveredChat]||null;}function CurrentChatProvider(_ref2){var children=_ref2.children;var _useLocation=Object(react_router__WEBPACK_IMPORTED_MODULE_5__["useLocation"])(),pathname=_useLocation.pathname;var chatID=Object(react__WEBPACK_IMPORTED_MODULE_3__["useMemo"])(function(){var _matchPath;return((_matchPath=Object(react_router__WEBPACK_IMPORTED_MODULE_5__["matchPath"])(pathname,{path:"/chats/:chatID"}))===null||_matchPath===void 0?void 0:_matchPath.params.chatID)||null;},[pathname]);var chats=Object(react_redux__WEBPACK_IMPORTED_MODULE_4__["useSelector"])(_app_reducers_chats__WEBPACK_IMPORTED_MODULE_7__["selectChats"]);var chat=chatID?chats[chatID]:null;Object(react__WEBPACK_IMPORTED_MODULE_3__["useEffect"])(function(){Log.info("Chat changed to %s (has chat object: %d)",chatID,!!chat);},[chatID]);return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__["jsx"])(ChatContext.Provider,{value:{chat:chat,chatID:chatID},children:children});}function CurrentMessagesProvider(_ref3){var children=_ref3.children;var chat=useCurrentChat();var _useMessages=useMessages(chat===null||chat===void 0?void 0:chat.id,true),_useMessages2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__["default"])(_useMessages,2),messages=_useMessages2[0],loadMore=_useMessages2[1];return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__["jsx"])(MessagesContext.Provider,{value:{messages:messages,loadMore:loadMore},children:children});}

/***/ }),

/***/ "./src/components/transcript/Recycler.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return RecycledElementRenderer; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__);
function RecycledElementRenderer(renderer,initializer,destructor){var cache=new Map();return function Renderer(context){if(!cache.has(context.id)){cache.set(context.id,renderer(context));}var el=cache.get(context.id);if(initializer)initializer(context,el);Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function(){return function(){return destructor?destructor(context,el):undefined;};});return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__["jsx"])("div",{ref:function ref(temp){if(temp)temp.replaceWith(el);}});};}

/***/ }),

/***/ "./src/components/transcript/acknowledgments/AcknowledgmentPicker.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return AcknowledgmentPicker; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/imcore-ajax-core/dist/index.js");
/* harmony import */ var imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _app_connection__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/app/connection.ts");
/* harmony import */ var _styles_ack_picker_AcknowledgmentPicker_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/styles/ack-picker/AcknowledgmentPicker.scss");
/* harmony import */ var _styles_ack_picker_AcknowledgmentPicker_scss__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_styles_ack_picker_AcknowledgmentPicker_scss__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _items_IMChatItem_Foundation__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./src/components/transcript/items/IMChatItem.Foundation.ts");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__);
function itemIsAcknowledgable(type,item){switch(type){case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__["ChatItemType"].text:case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__["ChatItemType"].plugin:case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__["ChatItemType"].attachment:return true;default:return false;}}var AcknowledgmentName;(function(AcknowledgmentName){AcknowledgmentName["heart"]="heart";AcknowledgmentName["thumbsUp"]="thumbs-up";AcknowledgmentName["thumbsDown"]="thumbs-down";AcknowledgmentName["emphasize"]="emphasize";AcknowledgmentName["question"]="question";AcknowledgmentName["haha"]="haha-en";})(AcknowledgmentName||(AcknowledgmentName={}));function AcknowledgmentButton(_ref){var name=_ref.name,type=_ref.type,ackFromMe=_ref.ackFromMe,message=_ref.message,chatItem=_ref.chatItem;var isSelected=(ackFromMe===null||ackFromMe===void 0?void 0:ackFromMe.acknowledgmentType)===type;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])("div",{className:"acknowledgment-button","attr-acknowledgment-name":name,"attr-selected":isSelected.toString(),onClick:/*#__PURE__*/Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["default"])(/*#__PURE__*/_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee(){var sendType,ackMessage;return _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:sendType=isSelected?type+1000:type;// store.dispatch(stageAcknowledgmentOverride({
//     type: sendType,
//     messageID: message.id,
//     chatItemID: chatItem.payload.id
// }));
_context.next=3;return _app_connection__WEBPACK_IMPORTED_MODULE_5__["apiClient"].messages.createAssociatedMessage(chatItem.payload.id,message.id,sendType);case 3:ackMessage=_context.sent;Object(_app_connection__WEBPACK_IMPORTED_MODULE_5__["receiveMessages"])([ackMessage]);case 5:case"end":return _context.stop();}}},_callee);}))});}function AcknowledgmentPicker(_ref3){var _acknowledgments$;var message=_ref3.message,chatItem=_ref3.chatItem;var acknowledgments=Object(_items_IMChatItem_Foundation__WEBPACK_IMPORTED_MODULE_7__["extractAcknowledgments"])(chatItem);if(!itemIsAcknowledgable(chatItem.type,chatItem.payload))return null;var ackFromMe=((_acknowledgments$=acknowledgments[0])===null||_acknowledgments$===void 0?void 0:_acknowledgments$.fromMe)?acknowledgments[0]:null;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])("div",{className:"acknowledgment-picker",children:[[AcknowledgmentName.heart,imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__["AcknowledgmentType"].heart],[AcknowledgmentName.thumbsUp,imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__["AcknowledgmentType"].thumbsup],[AcknowledgmentName.thumbsDown,imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__["AcknowledgmentType"].thumbsdown],[AcknowledgmentName.haha,imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__["AcknowledgmentType"].ha],[AcknowledgmentName.emphasize,imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__["AcknowledgmentType"].exclamation],[AcknowledgmentName.question,imcore_ajax_core__WEBPACK_IMPORTED_MODULE_3__["AcknowledgmentType"].questionmark]].map(function(_ref4){var _ref5=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__["default"])(_ref4,2),name=_ref5[0],type=_ref5[1];return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])(AcknowledgmentButton,{message:message,chatItem:chatItem,ackFromMe:ackFromMe,name:name,type:type},name);})});}

/***/ }),

/***/ "./src/components/transcript/composition/Composition.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Composition; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/prosemirror-commands/dist/index.es.js");
/* harmony import */ var prosemirror_keymap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/prosemirror-keymap/dist/index.es.js");
/* harmony import */ var prosemirror_state__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/prosemirror-state/dist/index.es.js");
/* harmony import */ var prosemirror_view_style_prosemirror_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./node_modules/prosemirror-view/style/prosemirror.css");
/* harmony import */ var prosemirror_view_style_prosemirror_css__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(prosemirror_view_style_prosemirror_css__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./node_modules/react-redux/es/index.js");
/* harmony import */ var use_prosemirror__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./node_modules/use-prosemirror/dist/index.js");
/* harmony import */ var use_prosemirror__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(use_prosemirror__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _app_connection__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__("./src/app/connection.ts");
/* harmony import */ var _app_reducers_debug__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__("./src/app/reducers/debug.ts");
/* harmony import */ var _app_reducers_presence__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__("./src/app/reducers/presence.ts");
/* harmony import */ var _app_store__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__("./src/app/store.ts");
/* harmony import */ var _styles_transcript_Composition_scss__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__("./src/styles/transcript/Composition.scss");
/* harmony import */ var _styles_transcript_Composition_scss__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_styles_transcript_Composition_scss__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _ChatTranscriptFoundation__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__("./src/components/transcript/ChatTranscriptFoundation.tsx");
/* harmony import */ var _MCUtils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__("./src/components/transcript/composition/MCUtils.ts");
/* harmony import */ var _plugins_DragAndDrop__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__("./src/components/transcript/composition/plugins/DragAndDrop.ts");
/* harmony import */ var _plugins_PlaceholderPlugin__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__("./src/components/transcript/composition/plugins/PlaceholderPlugin.ts");
/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__("./src/components/transcript/composition/schema.ts");
/* harmony import */ var _send_message__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__("./src/components/transcript/composition/send-message.ts");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__);
var currentChat=null;var IMTypingLedger=new Map();function fireSendMessage(_x,_x2){return _fireSendMessage.apply(this,arguments);}/**
 * Main composition view for chat views
 */function _fireSendMessage(){_fireSendMessage=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["default"])(/*#__PURE__*/_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(state,dispatch){var chat,transaction;return _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(currentChat){_context.next=2;break;}return _context.abrupt("return",state);case 2:chat=currentChat;_context.next=5;return Object(_send_message__WEBPACK_IMPORTED_MODULE_20__["default"])(state.doc,chat);case 5:IMTypingLedger.set(chat.id,false);transaction=state.tr.delete(0,state.doc.content.size);if(dispatch)dispatch(transaction);else state=state.apply(transaction);return _context.abrupt("return",state);case 9:case"end":return _context.stop();}}},_callee);}));return _fireSendMessage.apply(this,arguments);}function Composition(){currentChat=Object(_ChatTranscriptFoundation__WEBPACK_IMPORTED_MODULE_15__["useCurrentChat"])();var placeholderPlugin=Object(_plugins_PlaceholderPlugin__WEBPACK_IMPORTED_MODULE_18__["makePlaceholderPlugin"])("iMessage");var dragAndDropPlugin=Object(_plugins_DragAndDrop__WEBPACK_IMPORTED_MODULE_17__["makeDragAndDropPlugin"])(_schema__WEBPACK_IMPORTED_MODULE_19__["IMProseSchema"]);var editorView=Object(react__WEBPACK_IMPORTED_MODULE_7__["useRef"])(null);var isVisible=Object(react_redux__WEBPACK_IMPORTED_MODULE_8__["useSelector"])(_app_reducers_presence__WEBPACK_IMPORTED_MODULE_12__["selectVisibilityState"]);var showingDevtools=Object(react_redux__WEBPACK_IMPORTED_MODULE_8__["useSelector"])(_app_reducers_debug__WEBPACK_IMPORTED_MODULE_11__["selectShowingDevtools"]);Object(react__WEBPACK_IMPORTED_MODULE_7__["useLayoutEffect"])(function(){// synchronize with MCUtils
Object(_MCUtils__WEBPACK_IMPORTED_MODULE_16__["setEditorView"])(editorView.current);},[editorView]);var _useState=Object(react__WEBPACK_IMPORTED_MODULE_7__["useState"])(false),_useState2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__["default"])(_useState,2),canSend=_useState2[0],setCanSend=_useState2[1];var _useProseMirror=Object(use_prosemirror__WEBPACK_IMPORTED_MODULE_9__["useProseMirror"])({schema:_schema__WEBPACK_IMPORTED_MODULE_19__["IMProseSchema"],plugins:[placeholderPlugin,dragAndDropPlugin,new prosemirror_state__WEBPACK_IMPORTED_MODULE_5__["Plugin"]({state:{apply:function apply(_,__,___,newState){var isEmpty=Object(_send_message__WEBPACK_IMPORTED_MODULE_20__["documentIsEmpty"])(newState.doc);setCanSend(!isEmpty);if(!isVisible)return;if(!currentChat)return;var chatID=currentChat.id;if(isEmpty){if(IMTypingLedger.get(chatID)){_app_connection__WEBPACK_IMPORTED_MODULE_10__["apiClient"].chats.setTyping(chatID,false).catch(function(){IMTypingLedger.set(chatID,true);});IMTypingLedger.set(chatID,false);}return;}if(IMTypingLedger.get(chatID))return;_app_connection__WEBPACK_IMPORTED_MODULE_10__["apiClient"].chats.setTyping(chatID,true).catch(function(){IMTypingLedger.set(chatID,false);});IMTypingLedger.set(chatID,true);return undefined;},init:function init(){return undefined;}}}),Object(prosemirror_keymap__WEBPACK_IMPORTED_MODULE_4__["keymap"])({"Shift-Enter":prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__["splitBlock"],"Backspace":prosemirror_commands__WEBPACK_IMPORTED_MODULE_3__["baseKeymap"]["Backspace"],"Enter":function Enter(state,dispatch){fireSendMessage(state,dispatch);return false;}})]}),_useProseMirror2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__["default"])(_useProseMirror,2),state=_useProseMirror2[0],setState=_useProseMirror2[1];return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__["jsxs"])("div",{className:"composition",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__["jsx"])("div",{className:"devtools-trigger",onClick:function onClick(){return _app_store__WEBPACK_IMPORTED_MODULE_13__["store"].dispatch(Object(_app_reducers_debug__WEBPACK_IMPORTED_MODULE_11__["setShowDevtools"])(!showingDevtools));}}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__["jsx"])(use_prosemirror__WEBPACK_IMPORTED_MODULE_9__["ProseMirror"],{className:"composition-editor",state:state,onChange:setState,ref:editorView}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__["jsx"])("div",{"attr-can-send":canSend.toString(),className:"send-composition",onClick:function onClick(){return fireSendMessage(state).then(function(state){return setState(state);});}})]});}

/***/ }),

/***/ "./src/components/transcript/composition/MCUtils.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setEditorView", function() { return setEditorView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateEditorClass", function() { return updateEditorClass; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "flatDescendants", function() { return flatDescendants; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "everyDescendant", function() { return everyDescendant; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nodeOnlyContainsText", function() { return nodeOnlyContainsText; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "replaceDOMPRNode", function() { return replaceDOMPRNode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "replaceDOMIDPRNode", function() { return replaceDOMIDPRNode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "readFile", function() { return readFile; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getVideoCover", function() { return getVideoCover; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFileImage", function() { return getFileImage; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var prosemirror_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/prosemirror-state/dist/index.es.js");
var editorViewHandle=null;function editorView(){var _editorViewHandle,_editorViewHandle$vie;return(_editorViewHandle=editorViewHandle)===null||_editorViewHandle===void 0?void 0:(_editorViewHandle$vie=_editorViewHandle.view)===null||_editorViewHandle$vie===void 0?void 0:_editorViewHandle$vie.dom;}function setEditorView(newEditorView){editorViewHandle=newEditorView;}function updateEditorClass(className,enabled){var _editorView;(_editorView=editorView())===null||_editorView===void 0?void 0:_editorView.classList.toggle(className,enabled);}function flatDescendants(node){var descendants=[];node.descendants(function(node){descendants.push(node);return true;});return descendants;}function everyDescendant(node,check){return flatDescendants(node).every(check);}function nodeOnlyContainsText(node){return everyDescendant(node,function(node){return node.isText||node.isTextblock;});}function replaceDOMPRNode(domNode,prNode,view){var prosePos=view.posAtDOM(domNode,0);view.dispatch(view.state.tr.setSelection(prosemirror_state__WEBPACK_IMPORTED_MODULE_2__["NodeSelection"].create(view.state.doc,prosePos)).deleteSelection().insert(prosePos,prNode));}function replaceDOMIDPRNode(domID,prNode,view){replaceDOMPRNode(document.getElementById(domID),prNode,view);}function readFile(_x){return _readFile.apply(this,arguments);}function _readFile(){_readFile=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(/*#__PURE__*/_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(file){var reader,pending;return _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:reader=new FileReader();pending=new Promise(function(resolve){return reader.addEventListener("load",function(){return resolve(reader.result);});});reader.readAsDataURL(file);return _context.abrupt("return",pending);case 4:case"end":return _context.stop();}}},_callee);}));return _readFile.apply(this,arguments);}function getVideoCover(_x2){return _getVideoCover.apply(this,arguments);}function _getVideoCover(){_getVideoCover=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(/*#__PURE__*/_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(file){return _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",new Promise(function(resolve,reject){var player=document.createElement("video");player.setAttribute("src",URL.createObjectURL(file));player.load();player.addEventListener("error",function(ex){return reject(ex.error);});player.addEventListener("loadedmetadata",function(){setTimeout(function(){player.currentTime=0.0;},50);player.addEventListener("seeked",function(){var canvas=document.createElement("canvas");canvas.width=player.videoWidth;canvas.height=player.videoHeight;var ctx=canvas.getContext("2d");ctx.drawImage(player,0,0,canvas.width,canvas.height);ctx.canvas.toBlob(function(blob){return resolve(blob);},"image/jpeg",0.75);});});}));case 1:case"end":return _context2.stop();}}},_callee2);}));return _getVideoCover.apply(this,arguments);}function getFileImage(_x3){return _getFileImage.apply(this,arguments);}function _getFileImage(){_getFileImage=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(/*#__PURE__*/_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(file){return _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!file.type.startsWith("image")){_context3.next=4;break;}return _context3.abrupt("return",Promise.resolve(URL.createObjectURL(file)));case 4:if(!file.type.startsWith("video")){_context3.next=8;break;}return _context3.abrupt("return",getVideoCover(file).then(function(cover){if(cover)return URL.createObjectURL(cover);else return null;}));case 8:return _context3.abrupt("return",Promise.resolve(null));case 9:case"end":return _context3.stop();}}},_callee3);}));return _getFileImage.apply(this,arguments);}

/***/ }),

/***/ "./src/components/transcript/composition/plugins/DragAndDrop.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IMFileCache", function() { return IMFileCache; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "uploadFileWithID", function() { return uploadFileWithID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "elementForFileWithID", function() { return elementForFileWithID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makeDragAndDropPlugin", function() { return makeDragAndDropPlugin; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var prosemirror_state__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/prosemirror-state/dist/index.es.js");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/uuid/dist/esm-browser/index.js");
/* harmony import */ var _app_connection__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/app/connection.ts");
/* harmony import */ var _MCUtils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./src/components/transcript/composition/MCUtils.ts");
var IMFileCache=new Map();var IMImageBase64Cache=new Map();var IMFileUploadCache=new Map();/**
 * Uploads a file ID, returning an existing attachment if it was already uploaded
 * @param id ID to process
 * @returns promise of an AttachmentRepresentation
 */function uploadFileWithID(_x){return _uploadFileWithID.apply(this,arguments);}/**
 * Assembles a ProseMirror node for a File associated with the ID
 * @param id UUID of the file transfer
 * @returns ProseMirror node
 */function _uploadFileWithID(){_uploadFileWithID=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__["default"])(/*#__PURE__*/_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(id){var file,attachment;return _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!IMFileUploadCache.has(id)){_context.next=4;break;}return _context.abrupt("return",IMFileUploadCache.get(id));case 4:file=IMFileCache.get(id);if(file){_context.next=7;break;}throw new Error("Attempt to upload an unregistered transfer");case 7:_context.next=9;return _app_connection__WEBPACK_IMPORTED_MODULE_6__["apiClient"].attachments.create(file,{mime:file.type,filename:file.name});case 9:attachment=_context.sent;IMFileUploadCache.set(id,attachment);return _context.abrupt("return",attachment);case 12:case"end":return _context.stop();}}},_callee);}));return _uploadFileWithID.apply(this,arguments);}function elementForFileWithID(id){var file=IMFileCache.get(id);// No file. Abort!
if(!file)return["p"];var _file$type$split=file.type.split("/"),_file$type$split2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__["default"])(_file$type$split,1),type=_file$type$split2[0];var isImage=type==="image";var isVideo=type==="video";var baseProps={"attachment-id":id,id:id,class:"im-attachment","attachment-type":type,"attachment-resolved":(isImage||isVideo?IMImageBase64Cache.has(id):true).toString(),name:file.name};switch(type){case"image":case"video":if(IMImageBase64Cache.has(id)){// Thumbnail! Yay!
var src=IMImageBase64Cache.get(id);return["picture",baseProps,["img",{src:src}]];}// otherwise, still processing.
}return["div",baseProps];}function makeDragAndDropPlugin(schema){return new prosemirror_state__WEBPACK_IMPORTED_MODULE_4__["Plugin"]({props:{handleDOMEvents:{drop:function drop(view,event){var _event$dataTransfer;var files=(_event$dataTransfer=event.dataTransfer)===null||_event$dataTransfer===void 0?void 0:_event$dataTransfer.files;var selection=view.state.tr.selection;// no files >:( we've been swindled
if(!files||files.length===0)return false;event.preventDefault();var _iterator=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__["default"])(files),_step;try{var _loop=function _loop(){var file=_step.value;var id=Object(uuid__WEBPACK_IMPORTED_MODULE_5__["v4"])();// store file so it can be uploaded if the message is sent
IMFileCache.set(id,file);// insert node into prosemirror
var node=view.state.tr.insert(selection.$from.pos,schema.nodes.attachment.create({attachmentID:id}));if(file.type.startsWith("image")||file.type.startsWith("video")){// process thumbnail
Object(_MCUtils__WEBPACK_IMPORTED_MODULE_7__["getFileImage"])(file).then(function(result){IMImageBase64Cache.set(id,result);// replace the inserted prose node with the processed thumbnail
Object(_MCUtils__WEBPACK_IMPORTED_MODULE_7__["replaceDOMIDPRNode"])(id,schema.nodes.attachment.create({attachmentID:id,resolved:true}),view);});}view.dispatch(node.scrollIntoView());};for(_iterator.s();!(_step=_iterator.n()).done;){_loop();}}catch(err){_iterator.e(err);}finally{_iterator.f();}return false;}}}});}

/***/ }),

/***/ "./src/components/transcript/composition/plugins/PlaceholderPlugin.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makePlaceholderPlugin", function() { return makePlaceholderPlugin; });
/* harmony import */ var prosemirror_state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/prosemirror-state/dist/index.es.js");
/* harmony import */ var prosemirror_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/prosemirror-view/dist/index.es.js");
/**
 * Presents a placeholder in ProseMirror when it is empty
 * @param service service string to display. currently unused
 * @returns ProseMirror plugin
 */function makePlaceholderPlugin(service){return new prosemirror_state__WEBPACK_IMPORTED_MODULE_0__["Plugin"]({props:{decorations:function decorations(state){var decorations=[];var decorate=function decorate(node,pos){if(node.type.isBlock&&node.childCount===0){decorations.push(prosemirror_view__WEBPACK_IMPORTED_MODULE_1__["Decoration"].node(pos,pos+node.nodeSize,{class:"empty-node",service:"iMessage"}));}};state.doc.descendants(decorate);return prosemirror_view__WEBPACK_IMPORTED_MODULE_1__["DecorationSet"].create(state.doc,decorations);}}});}

/***/ }),

/***/ "./src/components/transcript/composition/schema.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IMProseSchema", function() { return IMProseSchema; });
/* harmony import */ var prosemirror_model__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/prosemirror-model/dist/index.es.js");
/* harmony import */ var prosemirror_schema_basic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/prosemirror-schema-basic/dist/index.es.js");
/* harmony import */ var _plugins_DragAndDrop__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/components/transcript/composition/plugins/DragAndDrop.ts");
var _specNodes=prosemirror_schema_basic__WEBPACK_IMPORTED_MODULE_1__["schema"].spec.nodes;var IMProseSchema=new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__["Schema"]({nodes:{text:_specNodes.get("text"),paragraph:_specNodes.get("paragraph"),doc:_specNodes.get("doc"),attachment:{inline:true,attrs:{attachmentID:{},resolved:{default:false}},group:"inline",draggable:true,parseDOM:[{tag:"div[attachment-id]",getAttrs:function(node){return{attachmentID:node.getAttribute("attachment-id")};}}],toDOM:function toDOM(_ref){var attachmentID=_ref.attrs.attachmentID;return Object(_plugins_DragAndDrop__WEBPACK_IMPORTED_MODULE_2__["elementForFileWithID"])(attachmentID);}}}});

/***/ }),

/***/ "./src/components/transcript/composition/send-message.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "documentIsEmpty", function() { return documentIsEmpty; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return sendMessage; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js");
/* harmony import */ var _app_connection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/app/connection.ts");
/* harmony import */ var _MCUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/components/transcript/composition/MCUtils.ts");
/* harmony import */ var _plugins_DragAndDrop__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/components/transcript/composition/plugins/DragAndDrop.ts");
function documentIsEmpty(doc){var descendants=Object(_MCUtils__WEBPACK_IMPORTED_MODULE_4__["flatDescendants"])(doc);var _iterator=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__["default"])(descendants),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var node=_step.value;if(node.isText&&node.nodeSize>0)return false;else if(node.isTextblock){if(Object(_MCUtils__WEBPACK_IMPORTED_MODULE_4__["nodeOnlyContainsText"])(node)&&node.textContent.length>0)return false;}else if(node.type.name==="attachment")return false;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return true;}/**
 * Creates and sends a message using the contents of a ProsemirrorNode
 * @param doc node to transform
 * @param chat chat to send the message to
 */function sendMessage(_x,_x2){return _sendMessage.apply(this,arguments);}function _sendMessage(){_sendMessage=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(/*#__PURE__*/_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(doc,chat){var rawParts,partWithPos,pending,textChunks,compiled;return _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!documentIsEmpty(doc)){_context2.next=2;break;}return _context2.abrupt("return");case 2:// Parts may resolve asynchronously, so they are stored with their pos so they can be sorted at the end
rawParts=[];// Helper to resolve a part
partWithPos=function partWithPos(pos){return rawParts.find(function(part){return part.pos===pos;});};// Any asynchronous part resolutions
pending=[];// Maps a node position to an associated chunk. If exists, the text will be appended to the associated chunk. (Think newlines)
textChunks={};doc.descendants(function(node,pos,parent){if(node.isText){rawParts.push({pos:pos,part:{type:"text",details:node.textContent}});return false;}else if(node.isTextblock){if(Object(_MCUtils__WEBPACK_IMPORTED_MODULE_4__["nodeOnlyContainsText"])(node)){var _parent$childAfter=parent.childAfter(pos),nextNode=_parent$childAfter.node;var nextPos=pos+((nextNode===null||nextNode===void 0?void 0:nextNode.nodeSize)||0);if(nextNode&&Object(_MCUtils__WEBPACK_IMPORTED_MODULE_4__["nodeOnlyContainsText"])(nextNode)){if(typeof textChunks[pos]==="number"){// map next node to the associated node
textChunks[nextPos]=textChunks[pos];}else{// map next node to self
textChunks[nextPos]=pos;}}// partPos is either associated or self
var partPos=typeof textChunks[pos]==="number"?textChunks[pos]:pos;var associatedPart=partWithPos(partPos);if(associatedPart)associatedPart.part.details+="\n".concat(node.textContent);else rawParts.push({pos:pos,part:{type:"text",details:node.textContent}});return false;}}else if(node.type.name==="attachment"){var attachmentID=node.attrs.attachmentID;if(!attachmentID)return;pending.push(Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])(/*#__PURE__*/_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(){var _yield$uploadFileWith,id;return _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Object(_plugins_DragAndDrop__WEBPACK_IMPORTED_MODULE_5__["uploadFileWithID"])(attachmentID);case 2:_yield$uploadFileWith=_context.sent;id=_yield$uploadFileWith.id;rawParts.push({pos:pos,part:{type:"attachment",details:id}});case 5:case"end":return _context.stop();}}},_callee);}))());return false;}});_context2.next=9;return Promise.all(pending);case 9:// sort parts by their position, then flatten them to just part
compiled=rawParts.sort(function(p1,p2){return p1.pos-p2.pos;}).map(function(_ref2){var part=_ref2.part;return part;});_context2.next=12;return _app_connection__WEBPACK_IMPORTED_MODULE_3__["apiClient"].chats.sendMessage(chat.id,{parts:compiled});case 12:case"end":return _context2.stop();}}},_callee2);}));return _sendMessage.apply(this,arguments);}

/***/ }),

/***/ "./src/components/transcript/items/IMChatItem.Foundation.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "extractAcknowledgments", function() { return extractAcknowledgments; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IMItemIsJumbo", function() { return IMItemIsJumbo; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js");
/* harmony import */ var emoji_regex_RGI_Emoji__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/emoji-regex/RGI_Emoji.js");
/* harmony import */ var emoji_regex_RGI_Emoji__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(emoji_regex_RGI_Emoji__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/imcore-ajax-core/dist/index.js");
/* harmony import */ var imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__);
function extractAcknowledgments(item){switch(item.type){case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["ChatItemType"].text:case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["ChatItemType"].attachment:case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["ChatItemType"].plugin:if(!item.payload.acknowledgments)return[];var acknowledgments=[];var _iterator=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__["default"])(item.payload.acknowledgments),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var acknowledgment=_step.value;if(acknowledgment.acknowledgmentType<3000)acknowledgments.push(acknowledgment);}}catch(err){_iterator.e(err);}finally{_iterator.f();}return acknowledgments.sort(function(ack1,ack2){return ack1.fromMe?-1:ack2.time-ack1.time;});default:return[];}}function emojiCount(str){var joiner="\u200D";var split=str.split(joiner);var count=0;var _iterator2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__["default"])(split),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var s=_step2.value;//removing the variation selectors
var num=Array.from(s.split(/[\ufe00-\ufe0f]/).join("")).length;count+=num;}//assuming the joiners are used appropriately
}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return count/split.length;}var regex=emoji_regex_RGI_Emoji__WEBPACK_IMPORTED_MODULE_1___default()();function IMTextChatItemIsJumbo(text){if(emojiCount(text)>3)return false;return text.replace(/\s/g,"").replace(regex,"").length===0;}function IMItemIsJumbo(item){return item.type===imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["ChatItemType"].text&&!item.payload.subject&&IMTextChatItemIsJumbo(item.payload.text);}

/***/ }),

/***/ "./src/components/transcript/items/IMChatItem.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isChatItem", function() { return isChatItem; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return IMChatItem; });
/* harmony import */ var imcore_ajax_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/imcore-ajax-core/dist/index.js");
/* harmony import */ var imcore_ajax_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _styles_transcript_items_IMChatItem_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/styles/transcript/items/IMChatItem.scss");
/* harmony import */ var _styles_transcript_items_IMChatItem_scss__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_styles_transcript_items_IMChatItem_scss__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _chat_IMAttachmentChatItem__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/components/transcript/items/chat/IMAttachmentChatItem.tsx");
/* harmony import */ var _chat_IMPluginChatItem__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/components/transcript/items/chat/IMPluginChatItem.tsx");
/* harmony import */ var _chat_IMTextChatItem__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/components/transcript/items/chat/IMTextChatItem.tsx");
/* harmony import */ var _chat_IMTypingChatItem__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/components/transcript/items/chat/IMTypingChatItem.tsx");
/* harmony import */ var _IMChatItem_Foundation__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./src/components/transcript/items/IMChatItem.Foundation.ts");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__);
function chatItemComponentForItem(item){switch(item.type){case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_0__["ChatItemType"].text:return _chat_IMTextChatItem__WEBPACK_IMPORTED_MODULE_5__["default"];case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_0__["ChatItemType"].attachment:return _chat_IMAttachmentChatItem__WEBPACK_IMPORTED_MODULE_3__["default"];case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_0__["ChatItemType"].plugin:return _chat_IMPluginChatItem__WEBPACK_IMPORTED_MODULE_4__["default"];case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_0__["ChatItemType"].typing:return _chat_IMTypingChatItem__WEBPACK_IMPORTED_MODULE_6__["default"];case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_0__["ChatItemType"].sticker:default:return null;}}function isChatItem(item){return!!chatItemComponentForItem(item);}function IMChatItem(_ref){var item=_ref.item,message=_ref.message,chat=_ref.chat,changed=_ref.changed,index=_ref.index;if(item.type===imcore_ajax_core__WEBPACK_IMPORTED_MODULE_0__["ChatItemType"].plugin&&item.payload.fallback)item=item.payload.fallback;var Component=chatItemComponentForItem(item);var acknowledgments=Object(_IMChatItem_Foundation__WEBPACK_IMPORTED_MODULE_7__["extractAcknowledgments"])(item);var isJumbo=Object(react__WEBPACK_IMPORTED_MODULE_1__["useMemo"])(function(){return Object(_IMChatItem_Foundation__WEBPACK_IMPORTED_MODULE_7__["IMItemIsJumbo"])(item);},[item]);if(!Component)return null;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["Fragment"],{children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsxs"])("div",{className:"chat-item-container".concat(isJumbo?" chat-item-jumbo":""),"data-has-acknowledgments":(acknowledgments.length>0).toString(),"attr-chat-item-id":item.payload.id,children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])("div",{className:"chat-item","data-item-type":item.type,"attr-from-me":message.fromMe.toString(),children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])("div",{className:"item-inner",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])(Component,{index:index,item:item.payload,message:message,chat:chat,changed:changed},item.payload.id)})}),acknowledgments.length?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])("div",{className:"acknowledgment-overlay","data-acknowledgment-count":acknowledgments.length,"data-acknowledgment-from-me":acknowledgments.some(function(a){return a.fromMe;}).toString(),children:acknowledgments.slice(0,3).map(function(ack){return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__["jsx"])("div",{className:"acknowledgment-item","data-ack-type":ack.acknowledgmentType,"data-from-me":ack.fromMe},ack.id);})}):null]})});}

/***/ }),

/***/ "./src/components/transcript/items/IMTranscriptItem.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DATE_SEPARATOR_TYPE", function() { return DATE_SEPARATOR_TYPE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isTranscriptItem", function() { return isTranscriptItem; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return IMTranscriptItem; });
/* harmony import */ var imcore_ajax_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/imcore-ajax-core/dist/index.js");
/* harmony import */ var imcore_ajax_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _styles_transcript_items_IMTranscriptItem_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/styles/transcript/items/IMTranscriptItem.scss");
/* harmony import */ var _styles_transcript_items_IMTranscriptItem_scss__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_styles_transcript_items_IMTranscriptItem_scss__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _util_receipt_formatting__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/util/receipt-formatting.ts");
/* harmony import */ var _transcript_IMDateSeparatorItem__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/components/transcript/items/transcript/IMDateSeparatorItem.tsx");
/* harmony import */ var _transcript_IMGroupTitleChangeItem__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/components/transcript/items/transcript/IMGroupTitleChangeItem.tsx");
/* harmony import */ var _transcript_IMParticipantChangeItem__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/components/transcript/items/transcript/IMParticipantChangeItem.tsx");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__);
var DATE_SEPARATOR_TYPE=Symbol("DATE_SEPARATOR");var transcriptTypes=[imcore_ajax_core__WEBPACK_IMPORTED_MODULE_0__["ChatItemType"].date,imcore_ajax_core__WEBPACK_IMPORTED_MODULE_0__["ChatItemType"].participantChange,imcore_ajax_core__WEBPACK_IMPORTED_MODULE_0__["ChatItemType"].groupAction,imcore_ajax_core__WEBPACK_IMPORTED_MODULE_0__["ChatItemType"].groupTitle,DATE_SEPARATOR_TYPE];function itemIsTranscriptLike(item){return transcriptTypes.includes(item.type);}function componentForItem(item){switch(item.type){case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_0__["ChatItemType"].groupTitle:return _transcript_IMGroupTitleChangeItem__WEBPACK_IMPORTED_MODULE_5__["default"];case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_0__["ChatItemType"].participantChange:return _transcript_IMParticipantChangeItem__WEBPACK_IMPORTED_MODULE_6__["default"];case DATE_SEPARATOR_TYPE:return _transcript_IMDateSeparatorItem__WEBPACK_IMPORTED_MODULE_4__["default"];default:return null;}}function isTranscriptItem(item){return itemIsTranscriptLike(item)&&componentForItem(item)!==null;}function IMTranscriptItem(_ref){var item=_ref.item,message=_ref.message,chat=_ref.chat,changed=_ref.changed;var Component=componentForItem(item);var _ref2=Object(_util_receipt_formatting__WEBPACK_IMPORTED_MODULE_3__["useFormattedTimestamp"])(message.time)||{},date=_ref2.date,time=_ref2.time;if(!Component)return null;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__["jsxs"])("div",{className:"transcript-item-container",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__["jsxs"])("div",{className:"transcript-label",children:[date," ",/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__["jsx"])("span",{className:"transcript-label-value",children:time})]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__["jsx"])(Component,{item:item.payload,message:message,chat:chat,changed:changed},item.payload.id)]});}

/***/ }),

/***/ "./src/components/transcript/items/Message.foundation.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "itemsAreShallowEqual", function() { return itemsAreShallowEqual; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "messagesAreContiguous", function() { return messagesAreContiguous; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "analyzeMessage", function() { return analyzeMessage; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js");
/* harmony import */ var imcore_ajax_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/imcore-ajax-core/dist/index.js");
/* harmony import */ var imcore_ajax_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _chat_ChatBubble__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/components/chat/ChatBubble.tsx");
/* harmony import */ var _IMChatItem__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/components/transcript/items/IMChatItem.tsx");
/* harmony import */ var _IMChatItem_Foundation__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/components/transcript/items/IMChatItem.Foundation.ts");
function allItemsAreChatItems(_ref){var items=_ref.items;var _iterator=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__["default"])(items),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;if(!Object(_IMChatItem__WEBPACK_IMPORTED_MODULE_3__["isChatItem"])(item))return false;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return true;}function itemsAreShallowEqual(message1,message2){if(!message1&&!message2||!(message1&&message2))return false;var items1=message1.items,items2=message2.items;if(items1.length!==items2.length)return false;// if (message1.flags !== message2.flags) return false;
// if (message1.time !== message2.time) return false;
if(message1.timeDelivered!==message2.timeDelivered)return false;if(message1.timeRead!==message2.timeRead)return false;if(message1.isDelivered!==message2.isDelivered)return false;for(var i=0;i<items1.length;i++){var item1=items1[i],item2=items2[i];if(item1.type!==item2.type)return false;switch(item1.type){/* eslint-disable */case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_1__["ChatItemType"].plugin:if(item1.payload&&item2.payload)return false;case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_1__["ChatItemType"].text:case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_1__["ChatItemType"].attachment:if(!item1.payload.acknowledgments&&!item2.payload.acknowledgments)continue;if(!item1.payload.acknowledgments||!item2.payload.acknowledgments)return false;var ack1=item1.payload.acknowledgments,ack2=item2.payload.acknowledgments;if(ack1.length!==ack2.length)return false;for(var _i=0;_i<ack1.length;_i++){var innerAck1=ack1[_i],innerAck2=ack2[_i];if(innerAck1.id!==innerAck2.id)return false;if(innerAck1.sender!==innerAck2.sender)return false;if(innerAck1.acknowledgmentType!==innerAck2.acknowledgmentType)return false;if(innerAck1.associatedID!==innerAck2.associatedID)return false;}/* eslint-enable */}}return true;}function messagesAreContiguous(message,nextMessage){if(message.sender!==nextMessage.sender)return false;if(!allItemsAreChatItems(message)||!allItemsAreChatItems(nextMessage))return false;if(Math.abs(message.time-nextMessage.time)<1000*60){var _iterator2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__["default"])(nextMessage.items),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var item=_step2.value;if(Object(_IMChatItem_Foundation__WEBPACK_IMPORTED_MODULE_4__["extractAcknowledgments"])(item).length>0)return false;}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return true;}else return false;}function analyzeMessage(_ref2){var message=_ref2.message,chat=_ref2.chat,nextMessage=_ref2.nextMessage,prevMessage=_ref2.prevMessage;var beginningContiguous=prevMessage?messagesAreContiguous(prevMessage,message):false;var endingContiguous=nextMessage?messagesAreContiguous(message,nextMessage):false;return{beginningContiguous:beginningContiguous,endingContiguous:endingContiguous,showImage:(chat===null||chat===void 0?void 0:chat.style)===_chat_ChatBubble__WEBPACK_IMPORTED_MODULE_2__["ChatStyle"].group&&!message.fromMe&&!endingContiguous,showName:(chat===null||chat===void 0?void 0:chat.style)===_chat_ChatBubble__WEBPACK_IMPORTED_MODULE_2__["ChatStyle"].group&&!message.fromMe&&!beginningContiguous&&(prevMessage?prevMessage.sender!==message.sender:true)};}

/***/ }),

/***/ "./src/components/transcript/items/Message.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "messageIsEmpty", function() { return messageIsEmpty; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/react-redux/es/index.js");
/* harmony import */ var _app_reducers_contacts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/app/reducers/contacts.ts");
/* harmony import */ var _hooks_useFormattedHandles__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/hooks/useFormattedHandles.ts");
/* harmony import */ var _styles_transcript_items_Message_scss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/styles/transcript/items/Message.scss");
/* harmony import */ var _styles_transcript_items_Message_scss__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_styles_transcript_items_Message_scss__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _chat_ChatBubble__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/components/chat/ChatBubble.tsx");
/* harmony import */ var _contacts_CNContactBubble__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./src/components/contacts/CNContactBubble.tsx");
/* harmony import */ var _ChatTranscriptFoundation__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./src/components/transcript/ChatTranscriptFoundation.tsx");
/* harmony import */ var _IMChatItem__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./src/components/transcript/items/IMChatItem.tsx");
/* harmony import */ var _IMTranscriptItem__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__("./src/components/transcript/items/IMTranscriptItem.tsx");
/* harmony import */ var _Message_foundation__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__("./src/components/transcript/items/Message.foundation.ts");
/* harmony import */ var _MessageReceiptController__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__("./src/components/transcript/items/MessageReceiptController.tsx");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__);
function componentForItem(item){if(Object(_IMTranscriptItem__WEBPACK_IMPORTED_MODULE_10__["isTranscriptItem"])(item))return _IMTranscriptItem__WEBPACK_IMPORTED_MODULE_10__["default"];else if(Object(_IMChatItem__WEBPACK_IMPORTED_MODULE_9__["isChatItem"])(item))return _IMChatItem__WEBPACK_IMPORTED_MODULE_9__["default"];else return null;}function messageIsEmpty(message){var _iterator=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__["default"])(message.items),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;if(componentForItem(item))return false;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return true;}function useContact(message){return Object(react_redux__WEBPACK_IMPORTED_MODULE_2__["useSelector"])(_app_reducers_contacts__WEBPACK_IMPORTED_MODULE_3__["selectHandleIDToContact"])[message.sender||""]||null;}function useMessageSenderName(message){var contact=useContact(message);if(contact===null||contact===void 0?void 0:contact.fullName)return contact.fullName;else return Object(_hooks_useFormattedHandles__WEBPACK_IMPORTED_MODULE_4__["formatPhoneNumber"])(message.sender||"<< system >>");}function Message(_ref){var eRef=_ref.eRef,message=_ref.message,nextMessage=_ref.nextMessage,prevMessage=_ref.prevMessage,lastDeliveredFromMe=_ref.lastDeliveredFromMe,lastReadFromMe=_ref.lastReadFromMe,changed=_ref.changed,style=_ref.style;var chat=Object(_ChatTranscriptFoundation__WEBPACK_IMPORTED_MODULE_8__["useCurrentChat"])();var messageSenderContact=useContact(message);var _useMemo=Object(react__WEBPACK_IMPORTED_MODULE_1__["useMemo"])(function(){return Object(_Message_foundation__WEBPACK_IMPORTED_MODULE_11__["analyzeMessage"])({message:message,nextMessage:nextMessage,chat:chat,prevMessage:prevMessage});},[JSON.stringify(message),JSON.stringify(nextMessage),JSON.stringify(prevMessage),chat]),beginningContiguous=_useMemo.beginningContiguous,endingContiguous=_useMemo.endingContiguous,showImage=_useMemo.showImage,showName=_useMemo.showName;changed=changed||function(){return undefined;};var items=message.items.map(function(item,index){var Component=componentForItem(item);if(!Component)return null;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__["jsx"])(Component,{index:index,changed:changed,item:item,message:message,chat:chat},item.payload.id);}).filter(function(item){return item;});var messageIsTranscriptMessage=message.items.every(_IMTranscriptItem__WEBPACK_IMPORTED_MODULE_10__["isTranscriptItem"]);var nextIsTranscript=(nextMessage===null||nextMessage===void 0?void 0:nextMessage.items.every(_IMTranscriptItem__WEBPACK_IMPORTED_MODULE_10__["isTranscriptItem"]))||false;var prevIsTranscript=(prevMessage===null||prevMessage===void 0?void 0:prevMessage.items.every(_IMTranscriptItem__WEBPACK_IMPORTED_MODULE_10__["isTranscriptItem"]))||false;var senderName=useMessageSenderName(message);var showReceipt=chat.style===_chat_ChatBubble__WEBPACK_IMPORTED_MODULE_6__["ChatStyle"].solo&&message.fromMe&&(lastDeliveredFromMe===message.id||lastReadFromMe===message.id);return items.length?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__["jsx"])("div",{className:"message-container",ref:eRef,style:style,children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__["jsx"])("div",{className:"message","attr-message-id":message.id,"attr-prev-contiguous":beginningContiguous.toString(),"attr-next-contiguous":endingContiguous.toString(),"attr-next-transcript-contiguous":(messageIsTranscriptMessage&&nextIsTranscript).toString(),"attr-prev-transcript-contiguous":(messageIsTranscriptMessage&&prevIsTranscript).toString(),"attr-from-me":message.fromMe.toString(),"attr-service":message.service,children:messageIsTranscriptMessage?items:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__["jsxs"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__["Fragment"],{children:[chat.style===_chat_ChatBubble__WEBPACK_IMPORTED_MODULE_6__["ChatStyle"].group&&!message.fromMe?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__["jsx"])("div",{className:"buddy-picture-track",children:showImage?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__["jsx"])(_contacts_CNContactBubble__WEBPACK_IMPORTED_MODULE_7__["default"],{contact:messageSenderContact}):null}):null,/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__["jsxs"])("div",{className:"items-track",children:[showName?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__["jsx"])("div",{className:"buddy-name",children:senderName}):null,items,message.fromMe?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__["jsx"])(_MessageReceiptController__WEBPACK_IMPORTED_MODULE_12__["default"],{showReceipt:showReceipt,timeRead:message.timeRead,id:message.id}):null]})]})})}):null;}/* harmony default export */ __webpack_exports__["default"] = (Message);

/***/ }),

/***/ "./src/components/transcript/items/MessageReceiptController.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MessageReceiptController; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _util_receipt_formatting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/util/receipt-formatting.ts");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__);
var readReceiptTransitionManager=new Map();function useEffectAfterFirstRun(effect,deps){var isFirstRun=Object(react__WEBPACK_IMPORTED_MODULE_1__["useRef"])(true);return Object(react__WEBPACK_IMPORTED_MODULE_1__["useLayoutEffect"])(function(){if(isFirstRun.current){isFirstRun.current=false;return;}effect();},deps);}function MessageReceiptController(_ref){var showReceipt=_ref.showReceipt,timeRead=_ref.timeRead,id=_ref.id;var formattedReceipt=Object(_util_receipt_formatting__WEBPACK_IMPORTED_MODULE_2__["useFormattedReceipt"])(showReceipt?timeRead:null);var _useState=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(true),_useState2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__["default"])(_useState,2),isComplete=_useState2[0],setIsComplete=_useState2[1];var _useState3=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(false),_useState4=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__["default"])(_useState3,2),isTransitioning=_useState4[0],setIsTransitioning=_useState4[1];var _useState5=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(false),_useState6=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__["default"])(_useState5,2),isAppearing=_useState6[0],setIsAppearing=_useState6[1];var _useState7=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(false),_useState8=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__["default"])(_useState7,2),isDisappearing=_useState8[0],setIsDisappearing=_useState8[1];if(!readReceiptTransitionManager.has(id))readReceiptTransitionManager.set(id,showReceipt);else if(!isTransitioning&&readReceiptTransitionManager.get(id)!==showReceipt){setIsAppearing(showReceipt);setIsDisappearing(!showReceipt);setIsTransitioning(true);setIsComplete(false);}useEffectAfterFirstRun(function(){if(isComplete){readReceiptTransitionManager.set(id,showReceipt);setIsTransitioning(false);setIsAppearing(false);setIsDisappearing(false);}},[isComplete]);return showReceipt||isTransitioning?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__["jsx"])("span",{className:"transcript-label message-receipt","attr-is-transitioning":isTransitioning.toString(),"attr-is-appearing":isAppearing.toString(),"attr-is-disappearing":isDisappearing.toString(),onAnimationEnd:function onAnimationEnd(){return setIsComplete(true);},children:timeRead?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__["jsxs"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__["Fragment"],{children:["Read ",/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__["jsx"])("span",{className:"transcript-label-value",children:formattedReceipt})]}):"Delivered"}):null;}

/***/ }),

/***/ "./src/components/transcript/items/chat/IMAttachmentChatItem.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _app_connection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/app/connection.ts");
/* harmony import */ var _Recycler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/components/transcript/Recycler.tsx");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__);
var IMAttachmentRenderingFormat;(function(IMAttachmentRenderingFormat){IMAttachmentRenderingFormat["image"]="image";IMAttachmentRenderingFormat["video"]="video";IMAttachmentRenderingFormat["file"]="file";})(IMAttachmentRenderingFormat||(IMAttachmentRenderingFormat={}));function ERComputeRenderingFormat(_ref){var _metadata$mime;var metadata=_ref.metadata;switch((metadata===null||metadata===void 0?void 0:(_metadata$mime=metadata.mime)===null||_metadata$mime===void 0?void 0:_metadata$mime.substring(0,5))||""){case"image":return IMAttachmentRenderingFormat.image;case"video":return IMAttachmentRenderingFormat.video;default:return IMAttachmentRenderingFormat.file;}}var IMImageAttachmentRenderer=Object(_Recycler__WEBPACK_IMPORTED_MODULE_2__["default"])(function(_ref2){var width=_ref2.width,height=_ref2.height,url=_ref2.url,description=_ref2.description;var element=document.createElement("img");element.setAttribute("width",(width===null||width===void 0?void 0:width.toString())||"100%");element.height=height;element.draggable=true;element.src=url;element.alt=description;return element;},function(_ref3,el){var changed=_ref3.changed;el.addEventListener("load",changed);},function(_ref4,el){var changed=_ref4.changed;el.removeEventListener("load",changed);});var IMVideoAttachmentRenderer=Object(_Recycler__WEBPACK_IMPORTED_MODULE_2__["default"])(function(_ref5){var width=_ref5.width,height=_ref5.height,url=_ref5.url;var element=document.createElement("video");element.width=width;element.height=height;element.preload="auto";element.draggable=true;element.src=url;element.controls=true;return element;},function(_ref6,el){var changed=_ref6.changed;el.addEventListener("loadedmetadata",changed);},function(_ref7,el){var changed=_ref7.changed;el.removeEventListener("loadedmetadata",changed);});function IMRenderingImplementation(item){switch(ERComputeRenderingFormat(item)){case IMAttachmentRenderingFormat.image:return IMImageAttachmentRenderer;case IMAttachmentRenderingFormat.video:return IMVideoAttachmentRenderer;default:return null;}}function IMAttachmentChatItem(_ref8){var _item$metadata;var item=_ref8.item,message=_ref8.message,changed=_ref8.changed;var url=_app_connection__WEBPACK_IMPORTED_MODULE_1__["apiClient"].attachmentURL(item.transferID);var _ref9=((_item$metadata=item.metadata)===null||_item$metadata===void 0?void 0:_item$metadata.size)||{},width=_ref9.width,height=_ref9.height;var RenderingImplementation=IMRenderingImplementation(item);if(!RenderingImplementation)return null;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__["jsx"])(RenderingImplementation,{id:item.id,width:width,height:height,url:url,changed:changed,description:message.description});}/* harmony default export */ __webpack_exports__["default"] = (/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.memo(IMAttachmentChatItem,function(_ref10,_ref11){var prevItem=_ref10.item;var newItem=_ref11.item;return JSON.stringify(prevItem)===JSON.stringify(newItem);}));

/***/ }),

/***/ "./src/components/transcript/items/chat/IMPluginChatItem.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _util_log__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/util/log.ts");
/* harmony import */ var _plugin_renderers_LPBalloon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/components/transcript/items/chat/plugin-renderers/LPBalloon.tsx");
/* harmony import */ var _plugin_renderers_MSMessageExtensionBalloonPlugin__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/components/transcript/items/chat/plugin-renderers/MSMessageExtensionBalloonPlugin.tsx");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__);
var Log=Object(_util_log__WEBPACK_IMPORTED_MODULE_3__["default"])("IMPluginChatItem");function componentForItem(item){switch(item.bundleID.split(":")[0]){case"com.apple.messages.URLBalloonProvider":if(!item.richLink)return null;return _plugin_renderers_LPBalloon__WEBPACK_IMPORTED_MODULE_4__["default"];case"com.apple.messages.MSMessageExtensionBalloonPlugin":return _plugin_renderers_MSMessageExtensionBalloonPlugin__WEBPACK_IMPORTED_MODULE_5__["default"];default:Log.warn("No implementation available for item with bundleID",item.bundleID);return null;}}function IMPluginChatItem(_ref){var item=_ref.item,ctx=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__["default"])(_ref,["item"]);var Component=componentForItem(item);if(!Component)return null;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__["jsx"])(Component,Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["default"])({changed:ctx.changed},item));}/* harmony default export */ __webpack_exports__["default"] = (/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default.a.memo(IMPluginChatItem,function(_ref2,_ref3){var prevItem=_ref2.item;var newItem=_ref3.item;return JSON.stringify(prevItem)===JSON.stringify(newItem);}));

/***/ }),

/***/ "./src/components/transcript/items/chat/IMTextChatItem.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js");
/* harmony import */ var imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/imcore-ajax-core/dist/index.js");
/* harmony import */ var imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _util_log__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/util/log.ts");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__);
var Log=Object(_util_log__WEBPACK_IMPORTED_MODULE_4__["default"])("IMTextChatItem");var IMTextPartFormattingDirective;(function(IMTextPartFormattingDirective){IMTextPartFormattingDirective["bold"]="text-part-bold";IMTextPartFormattingDirective["underline"]="text-part-underline";})(IMTextPartFormattingDirective||(IMTextPartFormattingDirective={}));function ERExtractFormattingDirectivesForIMTextPart(part){var directives=new Set();if(part.attributes){var _iterator=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__["default"])(part.attributes),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var attr=_step.value;switch(attr.key){case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["TextPartAttributeType"].bold:case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["TextPartAttributeType"].mention:directives.add(IMTextPartFormattingDirective.bold);break;case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["TextPartAttributeType"].writingDirection:break;default:Log.warn("No formatting implementation available for TextPartAttributeType",attr.key);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}if(part.type===imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["TextPartType"].calendar)directives.add(IMTextPartFormattingDirective.underline);return Array.from(directives);}function IMTextPartAttributeFormatter(_ref){var part=_ref.part,_ref$directives=_ref.directives,additionalDirectives=_ref$directives===void 0?[]:_ref$directives;var directives=ERExtractFormattingDirectivesForIMTextPart(part).concat(additionalDirectives);if(!directives.length){return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsx"])(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment,{children:part.string});}return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsx"])("span",{className:directives.join(" "),children:part.string});}function IMTextLinkPart(ctx){return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsx"])("a",{href:ctx.part.data,children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsx"])(IMTextPartAttributeFormatter,Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["default"])({},ctx))});}function componentForPart(part){switch(part.type){case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["TextPartType"].link:return IMTextLinkPart;case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["TextPartType"].text:case imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["TextPartType"].calendar:return IMTextPartAttributeFormatter;default:Log.warn("No implementation available for text part with type",part.type);return IMTextPartAttributeFormatter;}}function IMTextChatItem(ctx){return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsxs"])(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment,{children:[ctx.item.subject?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsxs"])(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment,{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsx"])(IMTextPartAttributeFormatter,Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["default"])(Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["default"])({},ctx),{},{part:{type:imcore_ajax_core__WEBPACK_IMPORTED_MODULE_2__["TextPartType"].text,string:ctx.item.subject},directives:[IMTextPartFormattingDirective.bold]})),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsx"])("br",{})]}):null,ctx.item.parts.map(function(part,index){var Component=componentForPart(part);if(!Component)return null;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsx"])(Component,Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["default"])({part:part},ctx),"".concat(ctx.item.id,"-").concat(index));})]});}/* harmony default export */ __webpack_exports__["default"] = (/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default.a.memo(IMTextChatItem,function(_ref2,_ref3){var prevItem=_ref2.item;var newItem=_ref3.item;return JSON.stringify(prevItem)===JSON.stringify(newItem);}));

/***/ }),

/***/ "./src/components/transcript/items/chat/IMTypingChatItem.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__);
/* harmony default export */ __webpack_exports__["default"] = (/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.memo(function IMTypingChatItem(){return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__["jsxs"])("div",{className:"typing-item",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__["jsx"])("div",{className:"typing-dot-1"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__["jsx"])("div",{className:"typing-dot-2"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__["jsx"])("div",{className:"typing-dot-3"})]});}));

/***/ }),

/***/ "./src/components/transcript/items/chat/plugin-renderers/LPBalloon.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return LPBalloon; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _lp_support_LPCaptionBar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/components/transcript/items/chat/plugin-renderers/lp-support/LPCaptionBar.tsx");
/* harmony import */ var _lp_support_LPMedia__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/components/transcript/items/chat/plugin-renderers/lp-support/LPMedia.tsx");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__);
function makeRGBA(color){if(!color)return undefined;return"rgba(".concat(color.red,",").concat(color.green,",").concat(color.blue,",").concat(color.alpha,")");}function LPBalloon(_ref){var className=_ref.className,richLink=_ref.richLink,changed=_ref.changed,attachments=_ref.attachments,id=_ref.id;var backgroundRGBA=makeRGBA(richLink.backgroundColor);var Element=richLink.url?"a":"div";return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__["jsxs"])(Element,{href:richLink.url,target:"_blank",className:className?"lp-balloon ".concat(className):"lp-balloon",style:{background:backgroundRGBA},children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__["jsx"])(_lp_support_LPMedia__WEBPACK_IMPORTED_MODULE_2__["default"],{id:id,changed:changed,video:richLink.video,image:richLink.image,audio:richLink.audio,topCaptionBar:richLink.mediaTopCaptionBar,bottomCaptionBar:richLink.mediaBottomCpationBar,attachments:attachments}),richLink.quotedText?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__["jsx"])("div",{className:"lp-quoted-text",children:richLink.quotedText}):null,richLink.captionBar?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__["jsx"])(_lp_support_LPCaptionBar__WEBPACK_IMPORTED_MODULE_1__["default"],{id:id,captionBar:richLink.captionBar,attachments:attachments}):null]});}

/***/ }),

/***/ "./src/components/transcript/items/chat/plugin-renderers/MSMessageExtensionBalloonPlugin.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return MSMessageExtensionBalloonPlugin; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _LPBalloon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/components/transcript/items/chat/plugin-renderers/LPBalloon.tsx");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__);
function makeText(text){return{text:text,textScale:1};}function generateCaptionBar(_ref){var caption=_ref.caption,subcaption=_ref.subcaption,secondarySubcaption=_ref.secondarySubcaption,tertiarySubcaption=_ref.tertiarySubcaption;if(!caption&&!subcaption&&!secondarySubcaption&&!tertiarySubcaption)return;return{top:caption||secondarySubcaption?{leading:caption?makeText(caption):undefined,trailing:secondarySubcaption?makeText(secondarySubcaption):undefined}:undefined,bottom:subcaption||tertiarySubcaption?{leading:subcaption?makeText(subcaption):undefined,trailing:tertiarySubcaption?makeText(tertiarySubcaption):undefined}:undefined};}function generateMediaBottomCaptionBar(_ref2){var imageTitle=_ref2.imageTitle,imageSubtitle=_ref2.imageSubtitle;if(!imageTitle&&!imageSubtitle)return;return{top:imageTitle?{leading:makeText(imageTitle)}:undefined,bottom:imageSubtitle?{leading:makeText(imageSubtitle)}:undefined};}function generateMediaTopCaptionBar(appIcon){if(!appIcon)return;return{leadingIcon:{type:99,src:appIcon}};}function generateRichLink(_ref3,attachments){var layoutInfo=_ref3.layoutInfo,appName=_ref3.appName,appIcon=_ref3.appIcon;return{captionBar:generateCaptionBar(layoutInfo||{}),mediaBottomCpationBar:generateMediaBottomCaptionBar(layoutInfo||{}),mediaTopCaptionBar:generateMediaTopCaptionBar(appIcon),image:attachments[0]?{attachmentIndex:0,type:0}:undefined};}function MSMessageExtensionBalloonPlugin(_ref4){var extension=_ref4.extension,attachments=_ref4.attachments,changed=_ref4.changed,id=_ref4.id;if(!extension)return null;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__["jsx"])(_LPBalloon__WEBPACK_IMPORTED_MODULE_1__["default"],{className:"lp-message-extension-compat",id:id,richLink:generateRichLink(extension,attachments),attachments:attachments,changed:changed});}

/***/ }),

/***/ "./src/components/transcript/items/chat/plugin-renderers/lp-support/LPAssetRenderer.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Recycler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./src/components/transcript/Recycler.tsx");
var LPAssetRenderer=Object(_Recycler__WEBPACK_IMPORTED_MODULE_0__["default"])(function(_ref){var videoURL=_ref.videoURL,imageURL=_ref.imageURL,changed=_ref.changed;if(videoURL){var element=document.createElement("video");element.className="lp-video";element.src=videoURL;if(imageURL)element.poster=imageURL;element.controls=true;return element;}else if(imageURL){var _element=document.createElement("img");_element.alt="Rich Link Banner";_element.src=imageURL;return _element;}else return document.createElement("div");},function(_ref2,el){var changed=_ref2.changed;el.addEventListener("loadedmetadata",changed);el.addEventListener("load",changed);},function(_ref3,el){var changed=_ref3.changed;el.removeEventListener("loadedmetadata",changed);el.removeEventListener("load",changed);});/* harmony default export */ __webpack_exports__["default"] = (LPAssetRenderer);

/***/ }),

/***/ "./src/components/transcript/items/chat/plugin-renderers/lp-support/LPCaptionBar.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return LPCaptionBar; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _LPCaptionIcon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/components/transcript/items/chat/plugin-renderers/lp-support/LPCaptionIcon.tsx");
/* harmony import */ var _LPCaptionSection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/components/transcript/items/chat/plugin-renderers/lp-support/LPCaptionSection.tsx");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__);
function LPCaptionBar(_ref){var id=_ref.id,_ref$captionBar=_ref.captionBar,aboveTop=_ref$captionBar.aboveTop,top=_ref$captionBar.top,bottom=_ref$captionBar.bottom,belowBottom=_ref$captionBar.belowBottom,leadingIcon=_ref$captionBar.leadingIcon,trailingIcon=_ref$captionBar.trailingIcon,attachments=_ref.attachments;if(!aboveTop&&!top&&!bottom&&!belowBottom&&!leadingIcon&&!trailingIcon)return null;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__["jsxs"])("div",{className:"lp-caption-bar",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__["jsx"])(_LPCaptionIcon__WEBPACK_IMPORTED_MODULE_1__["default"],{id:id,icon:leadingIcon,attachments:attachments,position:"left"}),aboveTop||top||bottom||belowBottom?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__["jsxs"])("div",{className:"lp-text-stack",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__["jsx"])(_LPCaptionSection__WEBPACK_IMPORTED_MODULE_2__["default"],{position:"aboveTop",section:aboveTop}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__["jsx"])(_LPCaptionSection__WEBPACK_IMPORTED_MODULE_2__["default"],{position:"top",section:top}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__["jsx"])(_LPCaptionSection__WEBPACK_IMPORTED_MODULE_2__["default"],{position:"bottom",section:bottom}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__["jsx"])(_LPCaptionSection__WEBPACK_IMPORTED_MODULE_2__["default"],{position:"belowBottom",section:belowBottom})]}):null,/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__["jsx"])(_LPCaptionIcon__WEBPACK_IMPORTED_MODULE_1__["default"],{id:id,icon:trailingIcon,attachments:attachments,position:"right"})]});}

/***/ }),

/***/ "./src/components/transcript/items/chat/plugin-renderers/lp-support/LPCaptionIcon.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return LPCaptionIcon; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _app_connection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/app/connection.ts");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__);
function isSyntheticImage(icon){return icon.type===99&&typeof icon.src==="string";}function computeIconSrc(icon,attachments){if(!icon)return null;else if(isSyntheticImage(icon))return icon.src;else if(typeof icon.attachmentIndex==="undefined"||!attachments[icon.attachmentIndex])return null;else return _app_connection__WEBPACK_IMPORTED_MODULE_1__["apiClient"].attachmentURL(attachments[icon.attachmentIndex].id);}function LPCaptionIcon(_ref){var icon=_ref.icon,attachments=_ref.attachments,position=_ref.position;var src=computeIconSrc(icon,attachments);if(!src)return null;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__["jsx"])("img",{alt:"Site Icon",className:"lp-caption-icon lp-caption-icon-".concat(position),src:src});}

/***/ }),

/***/ "./src/components/transcript/items/chat/plugin-renderers/lp-support/LPCaptionSection.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return LPCaptionSection; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__);
function LPCaptionSection(_ref){var section=_ref.section,position=_ref.position;if(!(section===null||section===void 0?void 0:section.leading)&&!(section===null||section===void 0?void 0:section.trailing))return null;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__["jsxs"])("div",{className:"lp-caption-section lp-caption-section-".concat(position),children:[section.leading?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__["jsx"])("div",{className:"lp-leading-text",children:section.leading.text}):null,section.trailing?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__["jsx"])("div",{className:"lp-trailing-text",children:section.trailing.text}):null]});}

/***/ }),

/***/ "./src/components/transcript/items/chat/plugin-renderers/lp-support/LPMedia.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return LPMedia; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _app_connection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/app/connection.ts");
/* harmony import */ var _LPAssetRenderer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/components/transcript/items/chat/plugin-renderers/lp-support/LPAssetRenderer.tsx");
/* harmony import */ var _LPCaptionBar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/components/transcript/items/chat/plugin-renderers/lp-support/LPCaptionBar.tsx");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__);
function attachmentURL(asset,attachments){if(!asset)return null;if(typeof asset.attachmentIndex!=="number")return null;if(!attachments[asset.attachmentIndex])return null;return _app_connection__WEBPACK_IMPORTED_MODULE_1__["apiClient"].attachmentURL(attachments[asset.attachmentIndex].id);}function LPMedia(ctx){var _ctx$video,_ctx$video2;var videoURL=((_ctx$video=ctx.video)===null||_ctx$video===void 0?void 0:_ctx$video.streamingURL)||((_ctx$video2=ctx.video)===null||_ctx$video2===void 0?void 0:_ctx$video2.youTubeURL)||attachmentURL(ctx.video,ctx.attachments);var imageURL=attachmentURL(ctx.image,ctx.attachments);if(!videoURL&&!imageURL)return null;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__["jsxs"])("div",{className:"lp-media",children:[ctx.topCaptionBar?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__["jsx"])(_LPCaptionBar__WEBPACK_IMPORTED_MODULE_3__["default"],{id:ctx.id,captionBar:ctx.topCaptionBar,attachments:ctx.attachments}):null,/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__["jsx"])(_LPAssetRenderer__WEBPACK_IMPORTED_MODULE_2__["default"],{imageURL:imageURL,videoURL:videoURL,id:ctx.id,changed:ctx.changed}),ctx.bottomCaptionBar?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__["jsx"])(_LPCaptionBar__WEBPACK_IMPORTED_MODULE_3__["default"],{id:ctx.id,captionBar:ctx.bottomCaptionBar,attachments:ctx.attachments}):null]});}

/***/ }),

/***/ "./src/components/transcript/items/transcript/IMDateSeparatorItem.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return IMDateSeparatorItem; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__);
function IMDateSeparatorItem(_ref){var message=_ref.message;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__["jsx"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__["Fragment"],{});}

/***/ }),

/***/ "./src/components/transcript/items/transcript/IMGroupTitleChangeItem.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return IMGroupTitleChangeItem; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _hooks_useFormattedHandles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/hooks/useFormattedHandles.ts");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__);
function IMGroupTitleChangeItem(_ref){var item=_ref.item,message=_ref.message;var formattedSender=Object(_hooks_useFormattedHandles__WEBPACK_IMPORTED_MODULE_1__["useFormattedHandle"])(item.sender);return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__["jsxs"])("div",{className:"transcript-label",children:[formattedSender," ",/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__["jsxs"])("span",{className:"transcript-label-value",children:["named the conversation \"",item.title,"\"."]})]});}

/***/ }),

/***/ "./src/components/transcript/items/transcript/IMParticipantChangeItem.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return IMParticipantChangeItem; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _hooks_useFormattedHandles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/hooks/useFormattedHandles.ts");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__);
function IMParticipantChangeItem(_ref){var item=_ref.item;var formattedInitiator=Object(_hooks_useFormattedHandles__WEBPACK_IMPORTED_MODULE_1__["useFormattedHandle"])(item.initiatorID);var formattedTarget=Object(_hooks_useFormattedHandles__WEBPACK_IMPORTED_MODULE_1__["useFormattedHandle"])(item.targetID);return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__["jsxs"])("div",{className:"transcript-label",children:[formattedInitiator," ",/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__["jsxs"])("span",{className:"transcript-label-value",children:[item.changeType?"removed":"added"," ",formattedTarget," from the conversation."]})]});}

/***/ }),

/***/ "./src/contexts/ChatSearchContext.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatSearchContext", function() { return ChatSearchContext; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatSearchProvider", function() { return ChatSearchProvider; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/react-redux/es/index.js");
/* harmony import */ var _app_reducers_chats__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/app/reducers/chats.ts");
/* harmony import */ var _app_reducers_contacts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/app/reducers/contacts.ts");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__);
var ChatSearchContext=/*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_1__["createContext"])({chatResults:[],setSearchCriteria:function setSearchCriteria(){return undefined;},clearSearchCriteria:function clearSearchCriteria(){return undefined;}});function ChatSearchProvider(_ref){var children=_ref.children;var allChats=Object.values(Object(react_redux__WEBPACK_IMPORTED_MODULE_2__["useSelector"])(_app_reducers_chats__WEBPACK_IMPORTED_MODULE_3__["selectChats"]));var contacts=Object(react_redux__WEBPACK_IMPORTED_MODULE_2__["useSelector"])(_app_reducers_contacts__WEBPACK_IMPORTED_MODULE_4__["selectHandleIDToContact"]);var _useState=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(),_useState2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__["default"])(_useState,2),searchCriteria=_useState2[0],setSearchCriteria=_useState2[1];var chatResults=Object(react__WEBPACK_IMPORTED_MODULE_1__["useMemo"])(function(){return!searchCriteria?allChats:allChats.filter(function(chat){return[chat.displayName,chat.id,chat.lastMessage,chat.participants,chat.participants.map(function(participant){var _contacts$participant;return(_contacts$participant=contacts[participant])===null||_contacts$participant===void 0?void 0:_contacts$participant.fullName;})].flat().some(function(text){return text===null||text===void 0?void 0:text.toLowerCase().includes(searchCriteria);});});},[allChats,searchCriteria]);var clearSearchCriteria=Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function(){},[]);return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__["jsx"])(ChatSearchContext.Provider,{value:{searchCriteria:searchCriteria,chatResults:chatResults?chatResults:allChats,setSearchCriteria:setSearchCriteria,clearSearchCriteria:clearSearchCriteria},children:children});}

/***/ }),

/***/ "./src/hooks/useChatName.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useChatName; });
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react-redux/es/index.js");
/* harmony import */ var _app_reducers_contacts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/app/reducers/contacts.ts");
/* harmony import */ var _useFormattedHandles__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/hooks/useFormattedHandles.ts");
function useChatName(chat){var handleIDToContact=Object(react_redux__WEBPACK_IMPORTED_MODULE_0__["useSelector"])(_app_reducers_contacts__WEBPACK_IMPORTED_MODULE_1__["selectHandleIDToContact"]);if(!chat)return null;return chat.displayName||Object(_useFormattedHandles__WEBPACK_IMPORTED_MODULE_2__["extractFormattedHandles"])(chat.participants,handleIDToContact).join(", ")||chat.id;}

/***/ }),

/***/ "./src/hooks/useContactResolver.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useContactResolver", function() { return useContactResolver; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/react-redux/es/index.js");
/* harmony import */ var _app_reducers_contacts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/app/reducers/contacts.ts");
function useContactResolver(handleIDs){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])([]),_useState2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__["default"])(_useState,2),resolved=_useState2[0],setResolved=_useState2[1];var handleIDToContact=Object(react_redux__WEBPACK_IMPORTED_MODULE_2__["useSelector"])(_app_reducers_contacts__WEBPACK_IMPORTED_MODULE_3__["selectHandleIDToContact"]);Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function(){setResolved(handleIDs.map(function(handleID){return handleIDToContact[handleID]||null;}));},[handleIDs,handleIDToContact]);return resolved;}

/***/ }),

/***/ "./src/hooks/useEvent.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventBus", function() { return EventBus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useEvent", function() { return useEvent; });
/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/eventemitter3/index.js");
/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(eventemitter3__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
var EventBus=new eventemitter3__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();function useEvent(event,fn){Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function(){EventBus.on(event,fn);return function(){EventBus.off(event,fn);};});}

/***/ }),

/***/ "./src/hooks/useFormattedHandles.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "formatPhoneNumber", function() { return formatPhoneNumber; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "extractFormattedHandles", function() { return extractFormattedHandles; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useFormattedHandles", function() { return useFormattedHandles; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useFormattedHandle", function() { return useFormattedHandle; });
/* harmony import */ var libphonenumber_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/libphonenumber-js/index.es6.js");
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react-redux/es/index.js");
/* harmony import */ var _app_reducers_contacts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/app/reducers/contacts.ts");
var cache={};function formatPhoneNumber(rawPhoneNumber){try{if(cache[rawPhoneNumber])return cache[rawPhoneNumber];var phoneNumber=Object(libphonenumber_js__WEBPACK_IMPORTED_MODULE_0__["default"])(rawPhoneNumber);if(!phoneNumber)return rawPhoneNumber;else return cache[rawPhoneNumber]="+".concat(phoneNumber.countryCallingCode," ").concat(phoneNumber.formatNational());}catch(_unused){return rawPhoneNumber;}}function extractFormattedHandles(handleIDs,contacts){return handleIDs.map(function(handleID){var contact=contacts[handleID];if(contact)return contact.fullName||handleID;else return formatPhoneNumber(handleID);});}function useFormattedHandles(handleIDs){var handleIDToContact=Object(react_redux__WEBPACK_IMPORTED_MODULE_1__["useSelector"])(_app_reducers_contacts__WEBPACK_IMPORTED_MODULE_2__["selectHandleIDToContact"]);return extractFormattedHandles(handleIDs,handleIDToContact);}function useFormattedHandle(handleID){var handleIDToContact=Object(react_redux__WEBPACK_IMPORTED_MODULE_1__["useSelector"])(_app_reducers_contacts__WEBPACK_IMPORTED_MODULE_2__["selectHandleIDToContact"]);if(!handleID)return"You";else{var contact=handleIDToContact[handleID];if(contact)return contact.fullName||handleID;else return formatPhoneNumber(handleID);}}

/***/ }),

/***/ "./src/index.css":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./src/index.tsx":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/react-dom/index.js");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/react-redux/es/index.js");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./node_modules/react-router-dom/esm/react-router-dom.js");
/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/App.tsx");
/* harmony import */ var _app_reducers_presence__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/app/reducers/presence.ts");
/* harmony import */ var _app_store__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/app/store.ts");
/* harmony import */ var _components_transcript_ChatTranscriptFoundation__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./src/components/transcript/ChatTranscriptFoundation.tsx");
/* harmony import */ var _index_css__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./src/index.css");
/* harmony import */ var _index_css__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_index_css__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./node_modules/react/jsx-runtime.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__);
react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.render(/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__["jsx"])(react_redux__WEBPACK_IMPORTED_MODULE_2__["Provider"],{store:_app_store__WEBPACK_IMPORTED_MODULE_6__["store"],children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__["jsx"])(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["BrowserRouter"],{children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__["jsx"])(_components_transcript_ChatTranscriptFoundation__WEBPACK_IMPORTED_MODULE_7__["CurrentChatProvider"],{children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__["jsx"])(_App__WEBPACK_IMPORTED_MODULE_4__["default"],{})})})}),document.getElementById("root"));document.addEventListener("visibilitychange",function(){return _app_store__WEBPACK_IMPORTED_MODULE_6__["store"].dispatch(Object(_app_reducers_presence__WEBPACK_IMPORTED_MODULE_5__["visibilityChanged"])());});

/***/ }),

/***/ "./src/styles/ChatSidebar.scss":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./src/styles/ChatSidebarItem.scss":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./src/styles/ack-picker/AcknowledgmentPicker.scss":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./src/styles/contacts/CNContactBubble.scss":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./src/styles/transcript/Composition.scss":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./src/styles/transcript/items/IMChatItem.scss":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./src/styles/transcript/items/IMTranscriptItem.scss":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./src/styles/transcript/items/Message.scss":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./src/util/dom.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "findAncestor", function() { return findAncestor; });
function findAncestor(element,cb){if(cb(element))return element;else if(element.parentElement)return findAncestor(element.parentElement,cb);else return null;}

/***/ }),

/***/ "./src/util/log.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return IMMakeLog; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IMLog", function() { return IMLog; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js");
/* harmony import */ var browser_bunyan__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/browser-bunyan/lib/index.m.js");
var sharedStream=new browser_bunyan__WEBPACK_IMPORTED_MODULE_1__["ConsoleFormattedStream"]();function makeMaybeLogger(logger,configLevel,requiredLevel){if(configLevel>requiredLevel)return function(cb){return undefined;};else return function(cb){return logger.debug.apply(logger,Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__["default"])(cb()));};}function IMMakeLog(namespace){var level=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"debug";var logger=Object(browser_bunyan__WEBPACK_IMPORTED_MODULE_1__["createLogger"])({name:namespace,stream:sharedStream,level:level});var resolvedLevel=Object(browser_bunyan__WEBPACK_IMPORTED_MODULE_1__["resolveLevel"])(level);return Object.assign(logger,{maybeDebug:makeMaybeLogger(logger,resolvedLevel,Object(browser_bunyan__WEBPACK_IMPORTED_MODULE_1__["resolveLevel"])("debug"))});}var IMLog=IMMakeLog("IMCore");

/***/ }),

/***/ "./src/util/message-presentation.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "messagesAreCloseEnough", function() { return messagesAreCloseEnough; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TIMESTAMP_ASSOCIATION", function() { return TIMESTAMP_ASSOCIATION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createTimestampMessage", function() { return createTimestampMessage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "prepareMessagesForPresentation", function() { return prepareMessagesForPresentation; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js");
/* harmony import */ var _components_transcript_items_IMTranscriptItem__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/components/transcript/items/IMTranscriptItem.tsx");
/* harmony import */ var _components_transcript_items_Message__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/components/transcript/items/Message.tsx");
function messagesAreCloseEnough(message1,message2){return Math.abs(message1.time-message2.time)<1000*60*60;}var TIMESTAMP_ASSOCIATION=Symbol("TIMESTAMP_ASSOCIATION");function createTimestampMessage(_ref){var service=_ref.service,time=_ref.time,chatID=_ref.chatID,id=_ref.id;return Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__["default"])({service:service,time:time,timeDelivered:0,timePlayed:0,timeRead:0,isSOS:false,isAudioMessage:false,isCancelTypingMessage:false,isDelivered:false,isTypingMessage:false,items:[{type:_components_transcript_items_IMTranscriptItem__WEBPACK_IMPORTED_MODULE_1__["DATE_SEPARATOR_TYPE"],payload:{id:"",chatID:chatID,fromMe:false,time:time}}],fileTransferIDs:[],chatID:chatID,id:"".concat(id,"--timesep"),flags:0,fromMe:false},TIMESTAMP_ASSOCIATION,id);}function prepareMessagesForPresentation(messages,reverse,injectTimestamps){var preparedMessages=[];for(var messageID in messages){if(Object(_components_transcript_items_Message__WEBPACK_IMPORTED_MODULE_2__["messageIsEmpty"])(messages[messageID]))continue;preparedMessages.push(messages[messageID]);}preparedMessages.sort(function(m1,m2){if(m1.isTypingMessage)return 1;else if(m2.isTypingMessage)return-1;return m1.time-m2.time;});if(injectTimestamps){for(var i=0;i<preparedMessages.length;i++){var message=preparedMessages[i];if(message.isTypingMessage||message[TIMESTAMP_ASSOCIATION])continue;var prevMessage=preparedMessages[i-1];if(prevMessage&&messagesAreCloseEnough(prevMessage,message))continue;preparedMessages.splice(i,0,createTimestampMessage(message));}}if(reverse)preparedMessages.reverse();return preparedMessages;}

/***/ }),

/***/ "./src/util/receipt-formatting.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useFormattedReceipt", function() { return useFormattedReceipt; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useFormattedTimestamp", function() { return useFormattedTimestamp; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
function useFormattedReceipt(millis){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_2__["useState"])(null),_useState2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__["default"])(_useState,2),formattedReceipt=_useState2[0],setFormattedReceipt=_useState2[1];Object(react__WEBPACK_IMPORTED_MODULE_2__["useLayoutEffect"])(function(){if(millis===null){setFormattedReceipt(null);return;}var parsed=luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].fromMillis(millis);if(parsed.hasSame(luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].local(),"day")){setFormattedReceipt(parsed.toLocaleString(luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].TIME_SIMPLE));}else if(parsed.hasSame(luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].local().minus({day:1}),"day")){setFormattedReceipt(parsed.toRelativeCalendar());}else{setFormattedReceipt(parsed.toLocaleString(luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].DATE_SHORT));}},[millis]);return formattedReceipt;}function useFormattedTimestamp(millis){var _useState3=Object(react__WEBPACK_IMPORTED_MODULE_2__["useState"])(null),_useState4=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__["default"])(_useState3,2),formattedTimestamp=_useState4[0],setFormattedTimestamp=_useState4[1];Object(react__WEBPACK_IMPORTED_MODULE_2__["useLayoutEffect"])(function(){if(millis===null){setFormattedTimestamp(null);return;}var parsed=luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].fromMillis(millis);var now=luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].local();var date;if(parsed.hasSame(now,"day")||parsed.hasSame(now.minus({day:1}),"day")){date=parsed.toRelativeCalendar()||parsed.toLocaleString(luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].DATE_SHORT);date=date.replace(date[0],date[0].toUpperCase());}else{date=parsed.toLocaleString(luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].DATE_SHORT);}setFormattedTimestamp({date:date,time:parsed.toLocaleString(luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].TIME_SIMPLE)});},[millis]);return formattedTimestamp;}

/***/ }),

/***/ "./src/util/use-persistent.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getPersistentValue", function() { return getPersistentValue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "usePersistent", function() { return usePersistent; });
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js");
/* harmony import */ var _home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
var persistentCache=new Map();var persistentObservers=new Map();function read(key,defaultValue){var value=localStorage.getItem(key);if(!value)return defaultValue;try{return JSON.parse(value);}catch(_unused){return defaultValue;}}var versionedValueFactory=function versionedValueFactory(key,defaultValue){return new Proxy({value:read(key,defaultValue),revision:0,observe:function observe(cb){return observePersistent(key,cb);}},{set:function set(target,property,value){switch(property){case"value":localStorage.setItem(key,JSON.stringify(value));target.value=value;target.revision+=1;if(!persistentObservers.has(key))break;var _iterator=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__["default"])(persistentObservers.get(key)),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var observer=_step.value;observer(value);}}catch(err){_iterator.e(err);}finally{_iterator.f();}break;case"revision":throw new Error("Revision cannot be mutated externally.");}return true;}});};function getPersistentValue(key,defaultValue){if(persistentCache.has(key))return persistentCache.get(key);else return persistentCache.set(key,versionedValueFactory(key,defaultValue)).get(key);}function observePersistent(key,fn){if(!persistentObservers.has(key))persistentObservers.set(key,new Set());persistentObservers.get(key).add(fn);return function(){var _persistentObservers$;(_persistentObservers$=persistentObservers.get(key))===null||_persistentObservers$===void 0?void 0:_persistentObservers$.delete(fn);};}function usePersistent(key,defaultValue){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_2__["useState"])(null),_useState2=Object(_home_runner_work_imcore_react_imcore_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__["default"])(_useState,2),persistentValue=_useState2[0],setPersistentValue=_useState2[1];var revision=Object(react__WEBPACK_IMPORTED_MODULE_2__["useRef"])(-1);var latest=Object(react__WEBPACK_IMPORTED_MODULE_2__["useMemo"])(function(){return getPersistentValue(key,defaultValue);},[]);if(revision.current!==latest.revision){setPersistentValue(latest.value);revision.current=latest.revision;}Object(react__WEBPACK_IMPORTED_MODULE_2__["useEffect"])(function(){return latest.observe(function(newValue){setPersistentValue(newValue);});});return[persistentValue,function(newValue){getPersistentValue(key,newValue).value=newValue;}];}

/***/ })

},[["./src/index.tsx","runtime-main",0]]]);
//# sourceMappingURL=main.bf3f76d6.chunk.js.map